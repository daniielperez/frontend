/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
var Fraction = /** @class */ (function (_super) {
    tslib_1.__extends(Fraction, _super);
    function Fraction() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return Fraction;
}(Number));
export { Fraction };
if (false) {
    /** @type {?} */
    Fraction.prototype.numerator;
    /** @type {?} */
    Fraction.prototype.denominator;
}
/**
 * @record
 */
export function IImageExtended() { }
if (false) {
    /** @type {?} */
    IImageExtended.prototype.exifdata;
    /** @type {?} */
    IImageExtended.prototype.iptcdata;
}
var Exif = /** @class */ (function () {
    function Exif() {
        this.debug = false;
        this.IptcFieldMap = {
            0x78: 'caption',
            0x6e: 'credit',
            0x19: 'keywords',
            0x37: 'dateCreated',
            0x50: 'byline',
            0x55: 'bylineTitle',
            0x7a: 'captionWriter',
            0x69: 'headline',
            0x74: 'copyright',
            0x0f: 'category'
        };
        this.Tags = {
            // version tags
            0x9000: 'ExifVersion',
            // EXIF version
            0xa000: 'FlashpixVersion',
            // Flashpix format version
            // colorspace tags
            0xa001: 'ColorSpace',
            // Color space information tag
            // image configuration
            0xa002: 'PixelXDimension',
            // Valid width of meaningful image
            0xa003: 'PixelYDimension',
            // Valid height of meaningful image
            0x9101: 'ComponentsConfiguration',
            // Information about channels
            0x9102: 'CompressedBitsPerPixel',
            // Compressed bits per pixel
            // user information
            0x927c: 'MakerNote',
            // Any desired information written by the manufacturer
            0x9286: 'UserComment',
            // Comments by user
            // related file
            0xa004: 'RelatedSoundFile',
            // Name of related sound file
            // date and time
            0x9003: 'DateTimeOriginal',
            // Date and time when the original image was generated
            0x9004: 'DateTimeDigitized',
            // Date and time when the image was stored digitally
            0x9290: 'SubsecTime',
            // Fractions of seconds for DateTime
            0x9291: 'SubsecTimeOriginal',
            // Fractions of seconds for DateTimeOriginal
            0x9292: 'SubsecTimeDigitized',
            // Fractions of seconds for DateTimeDigitized
            // picture-taking conditions
            0x829a: 'ExposureTime',
            // Exposure time (in seconds)
            0x829d: 'FNumber',
            // F number
            0x8822: 'ExposureProgram',
            // Exposure program
            0x8824: 'SpectralSensitivity',
            // Spectral sensitivity
            0x8827: 'ISOSpeedRatings',
            // ISO speed rating
            0x8828: 'OECF',
            // Optoelectric conversion factor
            0x9201: 'ShutterSpeedValue',
            // Shutter speed
            0x9202: 'ApertureValue',
            // Lens aperture
            0x9203: 'BrightnessValue',
            // Value of brightness
            0x9204: 'ExposureBias',
            // Exposure bias
            0x9205: 'MaxApertureValue',
            // Smallest F number of lens
            0x9206: 'SubjectDistance',
            // Distance to subject in meters
            0x9207: 'MeteringMode',
            // Metering mode
            0x9208: 'LightSource',
            // Kind of light source
            0x9209: 'Flash',
            // Flash status
            0x9214: 'SubjectArea',
            // Location and area of main subject
            0x920a: 'FocalLength',
            // Focal length of the lens in mm
            0xa20b: 'FlashEnergy',
            // Strobe energy in BCPS
            0xa20c: 'SpatialFrequencyResponse',
            //
            0xa20e: 'FocalPlaneXResolution',
            // Number of pixels in width direction per FocalPlaneResolutionUnit
            0xa20f: 'FocalPlaneYResolution',
            // Number of pixels in height direction per FocalPlaneResolutionUnit
            0xa210: 'FocalPlaneResolutionUnit',
            // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution
            0xa214: 'SubjectLocation',
            // Location of subject in image
            0xa215: 'ExposureIndex',
            // Exposure index selected on camera
            0xa217: 'SensingMethod',
            // Image sensor type
            0xa300: 'FileSource',
            // Image source (3 == DSC)
            0xa301: 'SceneType',
            // Scene type (1 == directly photographed)
            0xa302: 'CFAPattern',
            // Color filter array geometric pattern
            0xa401: 'CustomRendered',
            // Special processing
            0xa402: 'ExposureMode',
            // Exposure mode
            0xa403: 'WhiteBalance',
            // 1 = auto white balance, 2 = manual
            0xa404: 'DigitalZoomRation',
            // Digital zoom ratio
            0xa405: 'FocalLengthIn35mmFilm',
            // Equivalent foacl length assuming 35mm film camera (in mm)
            0xa406: 'SceneCaptureType',
            // Type of scene
            0xa407: 'GainControl',
            // Degree of overall image gain adjustment
            0xa408: 'Contrast',
            // Direction of contrast processing applied by camera
            0xa409: 'Saturation',
            // Direction of saturation processing applied by camera
            0xa40a: 'Sharpness',
            // Direction of sharpness processing applied by camera
            0xa40b: 'DeviceSettingDescription',
            //
            0xa40c: 'SubjectDistanceRange',
            // Distance to subject
            // other tags
            0xa005: 'InteroperabilityIFDPointer',
            0xa420: 'ImageUniqueID' // Identifier assigned uniquely to each image
        };
        this.TiffTags = {
            0x0100: 'ImageWidth',
            0x0101: 'ImageHeight',
            0x8769: 'ExifIFDPointer',
            0x8825: 'GPSInfoIFDPointer',
            0xa005: 'InteroperabilityIFDPointer',
            0x0102: 'BitsPerSample',
            0x0103: 'Compression',
            0x0106: 'PhotometricInterpretation',
            0x0112: 'Orientation',
            0x0115: 'SamplesPerPixel',
            0x011c: 'PlanarConfiguration',
            0x0212: 'YCbCrSubSampling',
            0x0213: 'YCbCrPositioning',
            0x011a: 'XResolution',
            0x011b: 'YResolution',
            0x0128: 'ResolutionUnit',
            0x0111: 'StripOffsets',
            0x0116: 'RowsPerStrip',
            0x0117: 'StripByteCounts',
            0x0201: 'JPEGInterchangeFormat',
            0x0202: 'JPEGInterchangeFormatLength',
            0x012d: 'TransferFunction',
            0x013e: 'WhitePoint',
            0x013f: 'PrimaryChromaticities',
            0x0211: 'YCbCrCoefficients',
            0x0214: 'ReferenceBlackWhite',
            0x0132: 'DateTime',
            0x010e: 'ImageDescription',
            0x010f: 'Make',
            0x0110: 'Model',
            0x0131: 'Software',
            0x013b: 'Artist',
            0x8298: 'Copyright'
        };
        this.GPSTags = {
            0x0000: 'GPSVersionID',
            0x0001: 'GPSLatitudeRef',
            0x0002: 'GPSLatitude',
            0x0003: 'GPSLongitudeRef',
            0x0004: 'GPSLongitude',
            0x0005: 'GPSAltitudeRef',
            0x0006: 'GPSAltitude',
            0x0007: 'GPSTimeStamp',
            0x0008: 'GPSSatellites',
            0x0009: 'GPSStatus',
            0x000a: 'GPSMeasureMode',
            0x000b: 'GPSDOP',
            0x000c: 'GPSSpeedRef',
            0x000d: 'GPSSpeed',
            0x000e: 'GPSTrackRef',
            0x000f: 'GPSTrack',
            0x0010: 'GPSImgDirectionRef',
            0x0011: 'GPSImgDirection',
            0x0012: 'GPSMapDatum',
            0x0013: 'GPSDestLatitudeRef',
            0x0014: 'GPSDestLatitude',
            0x0015: 'GPSDestLongitudeRef',
            0x0016: 'GPSDestLongitude',
            0x0017: 'GPSDestBearingRef',
            0x0018: 'GPSDestBearing',
            0x0019: 'GPSDestDistanceRef',
            0x001a: 'GPSDestDistance',
            0x001b: 'GPSProcessingMethod',
            0x001c: 'GPSAreaInformation',
            0x001d: 'GPSDateStamp',
            0x001e: 'GPSDifferential'
        };
        this.StringValues = {
            ExposureProgram: {
                0: 'Not defined',
                1: 'Manual',
                2: 'Normal program',
                3: 'Aperture priority',
                4: 'Shutter priority',
                5: 'Creative program',
                6: 'Action program',
                7: 'Portrait mode',
                8: 'Landscape mode'
            },
            MeteringMode: {
                0: 'Unknown',
                1: 'Average',
                2: 'CenterWeightedAverage',
                3: 'Spot',
                4: 'MultiSpot',
                5: 'Pattern',
                6: 'Partial',
                255: 'Other'
            },
            LightSource: {
                0: 'Unknown',
                1: 'Daylight',
                2: 'Fluorescent',
                3: 'Tungsten (incandescent light)',
                4: 'Flash',
                9: 'Fine weather',
                10: 'Cloudy weather',
                11: 'Shade',
                12: 'Daylight fluorescent (D 5700 - 7100K)',
                13: 'Day white fluorescent (N 4600 - 5400K)',
                14: 'Cool white fluorescent (W 3900 - 4500K)',
                15: 'White fluorescent (WW 3200 - 3700K)',
                17: 'Standard light A',
                18: 'Standard light B',
                19: 'Standard light C',
                20: 'D55',
                21: 'D65',
                22: 'D75',
                23: 'D50',
                24: 'ISO studio tungsten',
                255: 'Other'
            },
            Flash: {
                0x0000: 'Flash did not fire',
                0x0001: 'Flash fired',
                0x0005: 'Strobe return light not detected',
                0x0007: 'Strobe return light detected',
                0x0009: 'Flash fired, compulsory flash mode',
                0x000d: 'Flash fired, compulsory flash mode, return light not detected',
                0x000f: 'Flash fired, compulsory flash mode, return light detected',
                0x0010: 'Flash did not fire, compulsory flash mode',
                0x0018: 'Flash did not fire, auto mode',
                0x0019: 'Flash fired, auto mode',
                0x001d: 'Flash fired, auto mode, return light not detected',
                0x001f: 'Flash fired, auto mode, return light detected',
                0x0020: 'No flash function',
                0x0041: 'Flash fired, red-eye reduction mode',
                0x0045: 'Flash fired, red-eye reduction mode, return light not detected',
                0x0047: 'Flash fired, red-eye reduction mode, return light detected',
                0x0049: 'Flash fired, compulsory flash mode, red-eye reduction mode',
                0x004d: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',
                0x004f: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',
                0x0059: 'Flash fired, auto mode, red-eye reduction mode',
                0x005d: 'Flash fired, auto mode, return light not detected, red-eye reduction mode',
                0x005f: 'Flash fired, auto mode, return light detected, red-eye reduction mode'
            },
            SensingMethod: {
                1: 'Not defined',
                2: 'One-chip color area sensor',
                3: 'Two-chip color area sensor',
                4: 'Three-chip color area sensor',
                5: 'Color sequential area sensor',
                7: 'Trilinear sensor',
                8: 'Color sequential linear sensor'
            },
            SceneCaptureType: {
                0: 'Standard',
                1: 'Landscape',
                2: 'Portrait',
                3: 'Night scene'
            },
            SceneType: {
                1: 'Directly photographed'
            },
            CustomRendered: {
                0: 'Normal process',
                1: 'Custom process'
            },
            WhiteBalance: {
                0: 'Auto white balance',
                1: 'Manual white balance'
            },
            GainControl: {
                0: 'None',
                1: 'Low gain up',
                2: 'High gain up',
                3: 'Low gain down',
                4: 'High gain down'
            },
            Contrast: {
                0: 'Normal',
                1: 'Soft',
                2: 'Hard'
            },
            Saturation: {
                0: 'Normal',
                1: 'Low saturation',
                2: 'High saturation'
            },
            Sharpness: {
                0: 'Normal',
                1: 'Soft',
                2: 'Hard'
            },
            SubjectDistanceRange: {
                0: 'Unknown',
                1: 'Macro',
                2: 'Close view',
                3: 'Distant view'
            },
            FileSource: {
                3: 'DSC'
            },
            Components: {
                0: '',
                1: 'Y',
                2: 'Cb',
                3: 'Cr',
                4: 'R',
                5: 'G',
                6: 'B'
            }
        };
    }
    /**
     * @param {?} element
     * @param {?} event
     * @param {?} handler
     * @return {?}
     */
    Exif.prototype.addEvent = /**
     * @param {?} element
     * @param {?} event
     * @param {?} handler
     * @return {?}
     */
    function (element, event, handler) {
        if (element.addEventListener) {
            element.addEventListener(event, handler, false);
        }
        else {
            // Hello, IE!
            if (element.attachEvent) {
                element.attachEvent('on' + event, handler);
            }
        }
    };
    /**
     * @param {?} img
     * @return {?}
     */
    Exif.prototype.imageHasData = /**
     * @param {?} img
     * @return {?}
     */
    function (img) {
        return !!img.exifdata;
    };
    /**
     * @param {?} base64
     * @return {?}
     */
    Exif.prototype.base64ToArrayBuffer = /**
     * @param {?} base64
     * @return {?}
     */
    function (base64) {
        base64 = base64.replace(/^data:([^;]+);base64,/gim, '');
        /** @type {?} */
        var binary = atob(base64);
        /** @type {?} */
        var len = binary.length;
        /** @type {?} */
        var buffer = new ArrayBuffer(len);
        /** @type {?} */
        var view = new Uint8Array(buffer);
        for (var i = 0; i < len; i++) {
            view[i] = binary.charCodeAt(i);
        }
        return buffer;
    };
    /**
     * @param {?} url
     * @param {?} callback
     * @return {?}
     */
    Exif.prototype.objectURLToBlob = /**
     * @param {?} url
     * @param {?} callback
     * @return {?}
     */
    function (url, callback) {
        /** @type {?} */
        var http = new XMLHttpRequest();
        http.open('GET', url, true);
        http.responseType = 'blob';
        http.onload = (/**
         * @return {?}
         */
        function () {
            if (http.status === 200 || http.status === 0) {
                callback(http.response);
            }
        });
        http.send();
    };
    /**
     * @param {?} img
     * @param {?} callback
     * @return {?}
     */
    Exif.prototype.getImageData = /**
     * @param {?} img
     * @param {?} callback
     * @return {?}
     */
    function (img, callback) {
        var _this = this;
        /** @type {?} */
        var handleBinaryFile = (/**
         * @param {?} binFile
         * @return {?}
         */
        function (binFile) {
            /** @type {?} */
            var data = _this.findEXIFinJPEG(binFile);
            /** @type {?} */
            var iptcdata = _this.findIPTCinJPEG(binFile);
            ((/** @type {?} */ (img))).exifdata = data || {};
            ((/** @type {?} */ (img))).iptcdata = iptcdata || {};
            if (callback) {
                callback.call(img);
            }
        });
        if ('src' in img && ((/** @type {?} */ (img))).src) {
            if (/^data:/i.test(((/** @type {?} */ (img))).src)) {
                // Data URI
                /** @type {?} */
                var arrayBuffer = this.base64ToArrayBuffer(((/** @type {?} */ (img))).src);
                handleBinaryFile(arrayBuffer);
            }
            else {
                if (/^blob:/i.test(((/** @type {?} */ (img))).src)) {
                    // Object URL
                    /** @type {?} */
                    var fileReader_1 = new FileReader();
                    fileReader_1.onload = (/**
                     * @param {?} e
                     * @return {?}
                     */
                    function (e) {
                        handleBinaryFile(e.target.result);
                    });
                    this.objectURLToBlob(((/** @type {?} */ (img))).src, (/**
                     * @param {?} blob
                     * @return {?}
                     */
                    function (blob) {
                        fileReader_1.readAsArrayBuffer(blob);
                    }));
                }
                else {
                    /** @type {?} */
                    var http_1 = new XMLHttpRequest();
                    http_1.onload = (/**
                     * @return {?}
                     */
                    function () {
                        if (http_1.status === 200 || http_1.status === 0) {
                            handleBinaryFile(http_1.response);
                        }
                        else {
                            throw new Error('Could not load image');
                        }
                    });
                    http_1.open('GET', ((/** @type {?} */ (img))).src, true);
                    http_1.responseType = 'arraybuffer';
                    http_1.send(null);
                }
            }
        }
        else {
            if (FileReader && (img instanceof Blob || img instanceof File)) {
                /** @type {?} */
                var fileReader = new FileReader();
                fileReader.onload = (/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) {
                    _this.log('Got file of length ' + e.target.result.byteLength);
                    handleBinaryFile(e.target.result);
                });
                fileReader.readAsArrayBuffer(img);
            }
        }
    };
    /**
     * @param {?} file
     * @return {?}
     */
    Exif.prototype.findEXIFinJPEG = /**
     * @param {?} file
     * @return {?}
     */
    function (file) {
        /** @type {?} */
        var dataView = new DataView(file);
        this.log('Got file of length ' + file.byteLength);
        if (dataView.getUint8(0) !== 0xff || dataView.getUint8(1) !== 0xd8) {
            this.log('Not a valid JPEG');
            return false; // not a valid jpeg
        }
        /** @type {?} */
        var offset = 2;
        /** @type {?} */
        var length = file.byteLength;
        /** @type {?} */
        var marker;
        while (offset < length) {
            if (dataView.getUint8(offset) !== 0xff) {
                this.log('Not a valid marker at offset ' +
                    offset +
                    ', found: ' +
                    dataView.getUint8(offset));
                return false; // not a valid marker, something is wrong
            }
            marker = dataView.getUint8(offset + 1);
            this.log(marker);
            // we could implement handling for other markers here,
            // but we're only looking for 0xFFE1 for EXIF data
            if (marker === 225) {
                this.log('Found 0xFFE1 marker');
                return this.readEXIFData(dataView, offset + 4); // , dataView.getUint16(offset + 2) - 2);
                // offset += 2 + file.getShortAt(offset+2, true);
            }
            else {
                offset += 2 + dataView.getUint16(offset + 2);
            }
        }
    };
    /**
     * @param {?} file
     * @return {?}
     */
    Exif.prototype.findIPTCinJPEG = /**
     * @param {?} file
     * @return {?}
     */
    function (file) {
        /** @type {?} */
        var dataView = new DataView(file);
        this.log('Got file of length ' + file.byteLength);
        if (dataView.getUint8(0) !== 0xff || dataView.getUint8(1) !== 0xd8) {
            this.log('Not a valid JPEG');
            return false; // not a valid jpeg
        }
        /** @type {?} */
        var offset = 2;
        /** @type {?} */
        var length = file.byteLength;
        // tslint:disable-next-line:variable-name
        /** @type {?} */
        var isFieldSegmentStart = (/**
         * @param {?} _dataView
         * @param {?} _offset
         * @return {?}
         */
        function (_dataView, _offset) {
            return (_dataView.getUint8(_offset) === 0x38 &&
                _dataView.getUint8(_offset + 1) === 0x42 &&
                _dataView.getUint8(_offset + 2) === 0x49 &&
                _dataView.getUint8(_offset + 3) === 0x4d &&
                _dataView.getUint8(_offset + 4) === 0x04 &&
                _dataView.getUint8(_offset + 5) === 0x04);
        });
        while (offset < length) {
            if (isFieldSegmentStart(dataView, offset)) {
                // Get the length of the name header (which is padded to an even number of bytes)
                /** @type {?} */
                var nameHeaderLength = dataView.getUint8(offset + 7);
                if (nameHeaderLength % 2 !== 0) {
                    nameHeaderLength += 1;
                }
                // Check for pre photoshop 6 format
                if (nameHeaderLength === 0) {
                    // Always 4
                    nameHeaderLength = 4;
                }
                /** @type {?} */
                var startOffset = offset + 8 + nameHeaderLength;
                /** @type {?} */
                var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);
                return this.readIPTCData(file, startOffset, sectionLength);
            }
            // Not the marker, continue searching
            offset++;
        }
    };
    /**
     * @param {?} file
     * @param {?} startOffset
     * @param {?} sectionLength
     * @return {?}
     */
    Exif.prototype.readIPTCData = /**
     * @param {?} file
     * @param {?} startOffset
     * @param {?} sectionLength
     * @return {?}
     */
    function (file, startOffset, sectionLength) {
        /** @type {?} */
        var dataView = new DataView(file);
        /** @type {?} */
        var data = {};
        /** @type {?} */
        var fieldValue;
        /** @type {?} */
        var fieldName;
        /** @type {?} */
        var dataSize;
        /** @type {?} */
        var segmentType;
        /** @type {?} */
        var segmentSize;
        /** @type {?} */
        var segmentStartPos = startOffset;
        while (segmentStartPos < startOffset + sectionLength) {
            if (dataView.getUint8(segmentStartPos) === 0x1c &&
                dataView.getUint8(segmentStartPos + 1) === 0x02) {
                segmentType = dataView.getUint8(segmentStartPos + 2);
                if (segmentType in this.IptcFieldMap) {
                    dataSize = dataView.getInt16(segmentStartPos + 3);
                    segmentSize = dataSize + 5;
                    fieldName = this.IptcFieldMap[segmentType];
                    fieldValue = this.getStringFromDB(dataView, segmentStartPos + 5, dataSize);
                    // Check if we already stored a value with this name
                    if (data.hasOwnProperty(fieldName)) {
                        // Value already stored with this name, create multivalue field
                        if (data[fieldName] instanceof Array) {
                            data[fieldName].push(fieldValue);
                        }
                        else {
                            data[fieldName] = [data[fieldName], fieldValue];
                        }
                    }
                    else {
                        data[fieldName] = fieldValue;
                    }
                }
            }
            segmentStartPos++;
        }
        return data;
    };
    /**
     * @param {?} file
     * @param {?} tiffStart
     * @param {?} dirStart
     * @param {?} strings
     * @param {?} bigEnd
     * @return {?}
     */
    Exif.prototype.readTags = /**
     * @param {?} file
     * @param {?} tiffStart
     * @param {?} dirStart
     * @param {?} strings
     * @param {?} bigEnd
     * @return {?}
     */
    function (file, tiffStart, dirStart, strings, bigEnd) {
        /** @type {?} */
        var entries = file.getUint16(dirStart, !bigEnd);
        /** @type {?} */
        var tags = {};
        /** @type {?} */
        var entryOffset;
        /** @type {?} */
        var tag;
        for (var i = 0; i < entries; i++) {
            entryOffset = dirStart + i * 12 + 2;
            tag = strings[file.getUint16(entryOffset, !bigEnd)];
            if (!tag) {
                this.log('Unknown tag: ' + file.getUint16(entryOffset, !bigEnd));
            }
            tags[tag] = this.readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);
        }
        return tags;
    };
    /**
     * @param {?} file
     * @param {?} entryOffset
     * @param {?} tiffStart
     * @param {?} dirStart
     * @param {?} bigEnd
     * @return {?}
     */
    Exif.prototype.readTagValue = /**
     * @param {?} file
     * @param {?} entryOffset
     * @param {?} tiffStart
     * @param {?} dirStart
     * @param {?} bigEnd
     * @return {?}
     */
    function (file, entryOffset, tiffStart, dirStart, bigEnd) {
        /** @type {?} */
        var type = file.getUint16(entryOffset + 2, !bigEnd);
        /** @type {?} */
        var numValues = file.getUint32(entryOffset + 4, !bigEnd);
        /** @type {?} */
        var valueOffset = file.getUint32(entryOffset + 8, !bigEnd) + tiffStart;
        /** @type {?} */
        var offset;
        /** @type {?} */
        var vals;
        /** @type {?} */
        var val;
        /** @type {?} */
        var n;
        /** @type {?} */
        var numerator;
        /** @type {?} */
        var denominator;
        switch (type) {
            case 1: // byte, 8-bit unsigned int
            case 7: // undefined, 8-bit byte, value depending on field
                if (numValues === 1) {
                    return file.getUint8(entryOffset + 8, !bigEnd);
                }
                else {
                    offset = numValues > 4 ? valueOffset : entryOffset + 8;
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        vals[n] = file.getUint8(offset + n);
                    }
                    return vals;
                }
            case 2: // ascii, 8-bit byte
                offset = numValues > 4 ? valueOffset : entryOffset + 8;
                return this.getStringFromDB(file, offset, numValues - 1);
            case 3: // short, 16 bit int
                if (numValues === 1) {
                    return file.getUint16(entryOffset + 8, !bigEnd);
                }
                else {
                    offset = numValues > 2 ? valueOffset : entryOffset + 8;
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        vals[n] = file.getUint16(offset + 2 * n, !bigEnd);
                    }
                    return vals;
                }
            case 4: // long, 32 bit int
                if (numValues === 1) {
                    return file.getUint32(entryOffset + 8, !bigEnd);
                }
                else {
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        vals[n] = file.getUint32(valueOffset + 4 * n, !bigEnd);
                    }
                    return vals;
                }
            case 5: // rational = two long values, first is numerator, second is denominator
                if (numValues === 1) {
                    numerator = file.getUint32(valueOffset, !bigEnd);
                    denominator = file.getUint32(valueOffset + 4, !bigEnd);
                    val = new Fraction(numerator / denominator);
                    val.numerator = numerator;
                    val.denominator = denominator;
                    return val;
                }
                else {
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        numerator = file.getUint32(valueOffset + 8 * n, !bigEnd);
                        denominator = file.getUint32(valueOffset + 4 + 8 * n, !bigEnd);
                        vals[n] = new Fraction(numerator / denominator);
                        vals[n].numerator = numerator;
                        vals[n].denominator = denominator;
                    }
                    return vals;
                }
            case 9: // slong, 32 bit signed int
                if (numValues === 1) {
                    return file.getInt32(entryOffset + 8, !bigEnd);
                }
                else {
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        vals[n] = file.getInt32(valueOffset + 4 * n, !bigEnd);
                    }
                    return vals;
                }
            case 10: // signed rational, two slongs, first is numerator, second is denominator
                if (numValues === 1) {
                    return (file.getInt32(valueOffset, !bigEnd) /
                        file.getInt32(valueOffset + 4, !bigEnd));
                }
                else {
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        vals[n] =
                            file.getInt32(valueOffset + 8 * n, !bigEnd) /
                                file.getInt32(valueOffset + 4 + 8 * n, !bigEnd);
                    }
                    return vals;
                }
            default:
                break;
        }
    };
    /**
     * @param {?} buffer
     * @param {?} start
     * @param {?} length
     * @return {?}
     */
    Exif.prototype.getStringFromDB = /**
     * @param {?} buffer
     * @param {?} start
     * @param {?} length
     * @return {?}
     */
    function (buffer, start, length) {
        /** @type {?} */
        var outstr = '';
        for (var n = start; n < start + length; n++) {
            outstr += String.fromCharCode(buffer.getUint8(n));
        }
        return outstr;
    };
    /**
     * @param {?} file
     * @param {?} start
     * @return {?}
     */
    Exif.prototype.readEXIFData = /**
     * @param {?} file
     * @param {?} start
     * @return {?}
     */
    function (file, start) {
        if (this.getStringFromDB(file, start, 4) !== 'Exif') {
            this.log('Not valid EXIF data! ' + this.getStringFromDB(file, start, 4));
            return false;
        }
        /** @type {?} */
        var bigEnd;
        /** @type {?} */
        var tags;
        /** @type {?} */
        var tag;
        /** @type {?} */
        var exifData;
        /** @type {?} */
        var gpsData;
        /** @type {?} */
        var tiffOffset = start + 6;
        // test for TIFF validity and endianness
        if (file.getUint16(tiffOffset) === 0x4949) {
            bigEnd = false;
        }
        else {
            if (file.getUint16(tiffOffset) === 0x4d4d) {
                bigEnd = true;
            }
            else {
                this.log('Not valid TIFF data! (no 0x4949 or 0x4D4D)');
                return false;
            }
        }
        if (file.getUint16(tiffOffset + 2, !bigEnd) !== 0x002a) {
            this.log('Not valid TIFF data! (no 0x002A)');
            return false;
        }
        /** @type {?} */
        var firstIFDOffset = file.getUint32(tiffOffset + 4, !bigEnd);
        if (firstIFDOffset < 0x00000008) {
            this.log('Not valid TIFF data! (First offset less than 8)', file.getUint32(tiffOffset + 4, !bigEnd));
            return false;
        }
        tags = this.readTags(file, tiffOffset, tiffOffset + firstIFDOffset, this.TiffTags, bigEnd);
        if (tags.ExifIFDPointer) {
            exifData = this.readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, this.Tags, bigEnd);
            for (tag in exifData) {
                if ({}.hasOwnProperty.call(exifData, tag)) {
                    switch (tag) {
                        case 'LightSource':
                        case 'Flash':
                        case 'MeteringMode':
                        case 'ExposureProgram':
                        case 'SensingMethod':
                        case 'SceneCaptureType':
                        case 'SceneType':
                        case 'CustomRendered':
                        case 'WhiteBalance':
                        case 'GainControl':
                        case 'Contrast':
                        case 'Saturation':
                        case 'Sharpness':
                        case 'SubjectDistanceRange':
                        case 'FileSource':
                            exifData[tag] = this.StringValues[tag][exifData[tag]];
                            break;
                        case 'ExifVersion':
                        case 'FlashpixVersion':
                            exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);
                            break;
                        case 'ComponentsConfiguration':
                            /** @type {?} */
                            var compopents = 'Components';
                            exifData[tag] =
                                this.StringValues[compopents][exifData[tag][0]] +
                                    this.StringValues[compopents][exifData[tag][1]] +
                                    this.StringValues[compopents][exifData[tag][2]] +
                                    this.StringValues[compopents][exifData[tag][3]];
                            break;
                        default:
                            break;
                    }
                    tags[tag] = exifData[tag];
                }
            }
        }
        if (tags.GPSInfoIFDPointer) {
            gpsData = this.readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, this.GPSTags, bigEnd);
            for (tag in gpsData) {
                if ({}.hasOwnProperty.call(gpsData, tag)) {
                    switch (tag) {
                        case 'GPSVersionID':
                            gpsData[tag] =
                                gpsData[tag][0] +
                                    '.' +
                                    gpsData[tag][1] +
                                    '.' +
                                    gpsData[tag][2] +
                                    '.' +
                                    gpsData[tag][3];
                            break;
                        default:
                            break;
                    }
                    tags[tag] = gpsData[tag];
                }
            }
        }
        return tags;
    };
    //   get rid of this silly issue
    //   get rid of this silly issue
    /**
     * @private
     * @param {?} img
     * @return {?}
     */
    Exif.prototype.checkImageType = 
    //   get rid of this silly issue
    /**
     * @private
     * @param {?} img
     * @return {?}
     */
    function (img) {
        return img instanceof Image || img instanceof HTMLImageElement;
    };
    /**
     * @param {?} img
     * @param {?} callback
     * @return {?}
     */
    Exif.prototype.getData = /**
     * @param {?} img
     * @param {?} callback
     * @return {?}
     */
    function (img, callback) {
        if (this.checkImageType(img) && !img.complete) {
            return false;
        }
        if (!this.imageHasData((/** @type {?} */ (img)))) {
            this.getImageData((/** @type {?} */ (img)), callback);
        }
        else {
            if (callback) {
                callback.call(img);
            }
        }
        return true;
    };
    /**
     * @param {?} img
     * @param {?} tag
     * @return {?}
     */
    Exif.prototype.getTag = /**
     * @param {?} img
     * @param {?} tag
     * @return {?}
     */
    function (img, tag) {
        if (!this.imageHasData(img)) {
            return;
        }
        return img.exifdata[tag];
    };
    /**
     * @param {?} img
     * @return {?}
     */
    Exif.prototype.getAllTags = /**
     * @param {?} img
     * @return {?}
     */
    function (img) {
        if (!this.imageHasData(img)) {
            return {};
        }
        /** @type {?} */
        var a;
        /** @type {?} */
        var data = img.exifdata;
        /** @type {?} */
        var tags = {};
        for (a in data) {
            if (data.hasOwnProperty(a)) {
                tags[a] = data[a];
            }
        }
        return tags;
    };
    /**
     * @param {?} img
     * @return {?}
     */
    Exif.prototype.pretty = /**
     * @param {?} img
     * @return {?}
     */
    function (img) {
        if (!this.imageHasData(img)) {
            return '';
        }
        /** @type {?} */
        var a;
        /** @type {?} */
        var data = img.exifdata;
        /** @type {?} */
        var strPretty = '';
        for (a in data) {
            if (data.hasOwnProperty(a)) {
                if (typeof data[a] === 'object') {
                    if (data[a] instanceof Number) {
                        strPretty += a + " : " + data[a] + " [" + data[a].numerator + "/" + data[a].denominator + "]\r\n";
                    }
                    else {
                        strPretty += a + " : [" + data[a].length + " values]\r\n";
                    }
                }
                else {
                    strPretty += a + " : " + data[a] + "\r\n";
                }
            }
        }
        return strPretty;
    };
    /**
     * @param {?} file
     * @return {?}
     */
    Exif.prototype.readFromBinaryFile = /**
     * @param {?} file
     * @return {?}
     */
    function (file) {
        return this.findEXIFinJPEG(file);
    };
    /**
     * @param {...?} args
     * @return {?}
     */
    Exif.prototype.log = /**
     * @param {...?} args
     * @return {?}
     */
    function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (this.debug) {
            console.log(args);
        }
    };
    return Exif;
}());
export { Exif };
if (false) {
    /** @type {?} */
    Exif.prototype.debug;
    /** @type {?} */
    Exif.prototype.IptcFieldMap;
    /** @type {?} */
    Exif.prototype.Tags;
    /** @type {?} */
    Exif.prototype.TiffTags;
    /** @type {?} */
    Exif.prototype.GPSTags;
    /** @type {?} */
    Exif.prototype.StringValues;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhpZi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1pbWctY3JvcHBlci8iLCJzb3VyY2VzIjpbImxpYi9pbWFnZS1jcm9wcGVyL2V4aWYudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtJQUE4QixvQ0FBTTtJQUFwQzs7SUFHQSxDQUFDO0lBQUQsZUFBQztBQUFELENBQUMsQUFIRCxDQUE4QixNQUFNLEdBR25DOzs7O0lBRkMsNkJBQWtCOztJQUNsQiwrQkFBb0I7Ozs7O0FBR3RCLG9DQUdDOzs7SUFGQyxrQ0FBYzs7SUFDZCxrQ0FBYzs7QUFHaEI7SUFBQTtRQUNTLFVBQUssR0FBRyxLQUFLLENBQUM7UUFFZCxpQkFBWSxHQUFRO1lBQ3pCLElBQUksRUFBRSxTQUFTO1lBQ2YsSUFBSSxFQUFFLFFBQVE7WUFDZCxJQUFJLEVBQUUsVUFBVTtZQUNoQixJQUFJLEVBQUUsYUFBYTtZQUNuQixJQUFJLEVBQUUsUUFBUTtZQUNkLElBQUksRUFBRSxhQUFhO1lBQ25CLElBQUksRUFBRSxlQUFlO1lBQ3JCLElBQUksRUFBRSxVQUFVO1lBQ2hCLElBQUksRUFBRSxXQUFXO1lBQ2pCLElBQUksRUFBRSxVQUFVO1NBQ2pCLENBQUM7UUFFSyxTQUFJLEdBQVE7O1lBRWpCLE1BQU0sRUFBRSxhQUFhOztZQUNyQixNQUFNLEVBQUUsaUJBQWlCOzs7WUFHekIsTUFBTSxFQUFFLFlBQVk7OztZQUdwQixNQUFNLEVBQUUsaUJBQWlCOztZQUN6QixNQUFNLEVBQUUsaUJBQWlCOztZQUN6QixNQUFNLEVBQUUseUJBQXlCOztZQUNqQyxNQUFNLEVBQUUsd0JBQXdCOzs7WUFHaEMsTUFBTSxFQUFFLFdBQVc7O1lBQ25CLE1BQU0sRUFBRSxhQUFhOzs7WUFHckIsTUFBTSxFQUFFLGtCQUFrQjs7O1lBRzFCLE1BQU0sRUFBRSxrQkFBa0I7O1lBQzFCLE1BQU0sRUFBRSxtQkFBbUI7O1lBQzNCLE1BQU0sRUFBRSxZQUFZOztZQUNwQixNQUFNLEVBQUUsb0JBQW9COztZ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dUJBZ0NFOztJQUVGLDRCQXdJRSIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBGcmFjdGlvbiBleHRlbmRzIE51bWJlciB7XHJcbiAgbnVtZXJhdG9yOiBudW1iZXI7XHJcbiAgZGVub21pbmF0b3I6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJSW1hZ2VFeHRlbmRlZCBleHRlbmRzIEhUTUxJbWFnZUVsZW1lbnQge1xyXG4gIGV4aWZkYXRhOiBhbnk7XHJcbiAgaXB0Y2RhdGE6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEV4aWYge1xyXG4gIHB1YmxpYyBkZWJ1ZyA9IGZhbHNlO1xyXG5cclxuICBwdWJsaWMgSXB0Y0ZpZWxkTWFwOiBhbnkgPSB7XHJcbiAgICAweDc4OiAnY2FwdGlvbicsXHJcbiAgICAweDZlOiAnY3JlZGl0JyxcclxuICAgIDB4MTk6ICdrZXl3b3JkcycsXHJcbiAgICAweDM3OiAnZGF0ZUNyZWF0ZWQnLFxyXG4gICAgMHg1MDogJ2J5bGluZScsXHJcbiAgICAweDU1OiAnYnlsaW5lVGl0bGUnLFxyXG4gICAgMHg3YTogJ2NhcHRpb25Xcml0ZXInLFxyXG4gICAgMHg2OTogJ2hlYWRsaW5lJyxcclxuICAgIDB4NzQ6ICdjb3B5cmlnaHQnLFxyXG4gICAgMHgwZjogJ2NhdGVnb3J5J1xyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBUYWdzOiBhbnkgPSB7XHJcbiAgICAvLyB2ZXJzaW9uIHRhZ3NcclxuICAgIDB4OTAwMDogJ0V4aWZWZXJzaW9uJywgLy8gRVhJRiB2ZXJzaW9uXHJcbiAgICAweGEwMDA6ICdGbGFzaHBpeFZlcnNpb24nLCAvLyBGbGFzaHBpeCBmb3JtYXQgdmVyc2lvblxyXG5cclxuICAgIC8vIGNvbG9yc3BhY2UgdGFnc1xyXG4gICAgMHhhMDAxOiAnQ29sb3JTcGFjZScsIC8vIENvbG9yIHNwYWNlIGluZm9ybWF0aW9uIHRhZ1xyXG5cclxuICAgIC8vIGltYWdlIGNvbmZpZ3VyYXRpb25cclxuICAgIDB4YTAwMjogJ1BpeGVsWERpbWVuc2lvbicsIC8vIFZhbGlkIHdpZHRoIG9mIG1lYW5pbmdmdWwgaW1hZ2VcclxuICAgIDB4YTAwMzogJ1BpeGVsWURpbWVuc2lvbicsIC8vIFZhbGlkIGhlaWdodCBvZiBtZWFuaW5nZnVsIGltYWdlXHJcbiAgICAweDkxMDE6ICdDb21wb25lbnRzQ29uZmlndXJhdGlvbicsIC8vIEluZm9ybWF0aW9uIGFib3V0IGNoYW5uZWxzXHJcbiAgICAweDkxMDI6ICdDb21wcmVzc2VkQml0c1BlclBpeGVsJywgLy8gQ29tcHJlc3NlZCBiaXRzIHBlciBwaXhlbFxyXG5cclxuICAgIC8vIHVzZXIgaW5mb3JtYXRpb25cclxuICAgIDB4OTI3YzogJ01ha2VyTm90ZScsIC8vIEFueSBkZXNpcmVkIGluZm9ybWF0aW9uIHdyaXR0ZW4gYnkgdGhlIG1hbnVmYWN0dXJlclxyXG4gICAgMHg5Mjg2OiAnVXNlckNvbW1lbnQnLCAvLyBDb21tZW50cyBieSB1c2VyXHJcblxyXG4gICAgLy8gcmVsYXRlZCBmaWxlXHJcbiAgICAweGEwMDQ6ICdSZWxhdGVkU291bmRGaWxlJywgLy8gTmFtZSBvZiByZWxhdGVkIHNvdW5kIGZpbGVcclxuXHJcbiAgICAvLyBkYXRlIGFuZCB0aW1lXHJcbiAgICAweDkwMDM6ICdEYXRlVGltZU9yaWdpbmFsJywgLy8gRGF0ZSBhbmQgdGltZSB3aGVuIHRoZSBvcmlnaW5hbCBpbWFnZSB3YXMgZ2VuZXJhdGVkXHJcbiAgICAweDkwMDQ6ICdEYXRlVGltZURpZ2l0aXplZCcsIC8vIERhdGUgYW5kIHRpbWUgd2hlbiB0aGUgaW1hZ2Ugd2FzIHN0b3JlZCBkaWdpdGFsbHlcclxuICAgIDB4OTI5MDogJ1N1YnNlY1RpbWUnLCAvLyBGcmFjdGlvbnMgb2Ygc2Vjb25kcyBmb3IgRGF0ZVRpbWVcclxuICAgIDB4OTI5MTogJ1N1YnNlY1RpbWVPcmlnaW5hbCcsIC8vIEZyYWN0aW9ucyBvZiBzZWNvbmRzIGZvciBEYXRlVGltZU9yaWdpbmFsXHJcbiAgICAweDkyOTI6ICdTdWJzZWNUaW1lRGlnaXRpemVkJywgLy8gRnJhY3Rpb25zIG9mIHNlY29uZHMgZm9yIERhdGVUaW1lRGlnaXRpemVkXHJcblxyXG4gICAgLy8gcGljdHVyZS10YWtpbmcgY29uZGl0aW9uc1xyXG4gICAgMHg4MjlhOiAnRXhwb3N1cmVUaW1lJywgLy8gRXhwb3N1cmUgdGltZSAoaW4gc2Vjb25kcylcclxuICAgIDB4ODI5ZDogJ0ZOdW1iZXInLCAvLyBGIG51bWJlclxyXG4gICAgMHg4ODIyOiAnRXhwb3N1cmVQcm9ncmFtJywgLy8gRXhwb3N1cmUgcHJvZ3JhbVxyXG4gICAgMHg4ODI0OiAnU3BlY3RyYWxTZW5zaXRpdml0eScsIC8vIFNwZWN0cmFsIHNlbnNpdGl2aXR5XHJcbiAgICAweDg4Mjc6ICdJU09TcGVlZFJhdGluZ3MnLCAvLyBJU08gc3BlZWQgcmF0aW5nXHJcbiAgICAweDg4Mjg6ICdPRUNGJywgLy8gT3B0b2VsZWN0cmljIGNvbnZlcnNpb24gZmFjdG9yXHJcbiAgICAweDkyMDE6ICdTaHV0dGVyU3BlZWRWYWx1ZScsIC8vIFNodXR0ZXIgc3BlZWRcclxuICAgIDB4OTIwMjogJ0FwZXJ0dXJlVmFsdWUnLCAvLyBMZW5zIGFwZXJ0dXJlXHJcbiAgICAweDkyMDM6ICdCcmlnaHRuZXNzVmFsdWUnLCAvLyBWYWx1ZSBvZiBicmlnaHRuZXNzXHJcbiAgICAweDkyMDQ6ICdFeHBvc3VyZUJpYXMnLCAvLyBFeHBvc3VyZSBiaWFzXHJcbiAgICAweDkyMDU6ICdNYXhBcGVydHVyZVZhbHVlJywgLy8gU21hbGxlc3QgRiBudW1iZXIgb2YgbGVuc1xyXG4gICAgMHg5MjA2OiAnU3ViamVjdERpc3RhbmNlJywgLy8gRGlzdGFuY2UgdG8gc3ViamVjdCBpbiBtZXRlcnNcclxuICAgIDB4OTIwNzogJ01ldGVyaW5nTW9kZScsIC8vIE1ldGVyaW5nIG1vZGVcclxuICAgIDB4OTIwODogJ0xpZ2h0U291cmNlJywgLy8gS2luZCBvZiBsaWdodCBzb3VyY2VcclxuICAgIDB4OTIwOTogJ0ZsYXNoJywgLy8gRmxhc2ggc3RhdHVzXHJcbiAgICAweDkyMTQ6ICdTdWJqZWN0QXJlYScsIC8vIExvY2F0aW9uIGFuZCBhcmVhIG9mIG1haW4gc3ViamVjdFxyXG4gICAgMHg5MjBhOiAnRm9jYWxMZW5ndGgnLCAvLyBGb2NhbCBsZW5ndGggb2YgdGhlIGxlbnMgaW4gbW1cclxuICAgIDB4YTIwYjogJ0ZsYXNoRW5lcmd5JywgLy8gU3Ryb2JlIGVuZXJneSBpbiBCQ1BTXHJcbiAgICAweGEyMGM6ICdTcGF0aWFsRnJlcXVlbmN5UmVzcG9uc2UnLCAvL1xyXG4gICAgMHhhMjBlOiAnRm9jYWxQbGFuZVhSZXNvbHV0aW9uJywgLy8gTnVtYmVyIG9mIHBpeGVscyBpbiB3aWR0aCBkaXJlY3Rpb24gcGVyIEZvY2FsUGxhbmVSZXNvbHV0aW9uVW5pdFxyXG4gICAgMHhhMjBmOiAnRm9jYWxQbGFuZVlSZXNvbHV0aW9uJywgLy8gTnVtYmVyIG9mIHBpeGVscyBpbiBoZWlnaHQgZGlyZWN0aW9uIHBlciBGb2NhbFBsYW5lUmVzb2x1dGlvblVuaXRcclxuICAgIDB4YTIxMDogJ0ZvY2FsUGxhbmVSZXNvbHV0aW9uVW5pdCcsIC8vIFVuaXQgZm9yIG1lYXN1cmluZyBGb2NhbFBsYW5lWFJlc29sdXRpb24gYW5kIEZvY2FsUGxhbmVZUmVzb2x1dGlvblxyXG4gICAgMHhhMjE0OiAnU3ViamVjdExvY2F0aW9uJywgLy8gTG9jYXRpb24gb2Ygc3ViamVjdCBpbiBpbWFnZVxyXG4gICAgMHhhMjE1OiAnRXhwb3N1cmVJbmRleCcsIC8vIEV4cG9zdXJlIGluZGV4IHNlbGVjdGVkIG9uIGNhbWVyYVxyXG4gICAgMHhhMjE3OiAnU2Vuc2luZ01ldGhvZCcsIC8vIEltYWdlIHNlbnNvciB0eXBlXHJcbiAgICAweGEzMDA6ICdGaWxlU291cmNlJywgLy8gSW1hZ2Ugc291cmNlICgzID09IERTQylcclxuICAgIDB4YTMwMTogJ1NjZW5lVHlwZScsIC8vIFNjZW5lIHR5cGUgKDEgPT0gZGlyZWN0bHkgcGhvdG9ncmFwaGVkKVxyXG4gICAgMHhhMzAyOiAnQ0ZBUGF0dGVybicsIC8vIENvbG9yIGZpbHRlciBhcnJheSBnZW9tZXRyaWMgcGF0dGVyblxyXG4gICAgMHhhNDAxOiAnQ3VzdG9tUmVuZGVyZWQnLCAvLyBTcGVjaWFsIHByb2Nlc3NpbmdcclxuICAgIDB4YTQwMjogJ0V4cG9zdXJlTW9kZScsIC8vIEV4cG9zdXJlIG1vZGVcclxuICAgIDB4YTQwMzogJ1doaXRlQmFsYW5jZScsIC8vIDEgPSBhdXRvIHdoaXRlIGJhbGFuY2UsIDIgPSBtYW51YWxcclxuICAgIDB4YTQwNDogJ0RpZ2l0YWxab29tUmF0aW9uJywgLy8gRGlnaXRhbCB6b29tIHJhdGlvXHJcbiAgICAweGE0MDU6ICdGb2NhbExlbmd0aEluMzVtbUZpbG0nLCAvLyBFcXVpdmFsZW50IGZvYWNsIGxlbmd0aCBhc3N1bWluZyAzNW1tIGZpbG0gY2FtZXJhIChpbiBtbSlcclxuICAgIDB4YTQwNjogJ1NjZW5lQ2FwdHVyZVR5cGUnLCAvLyBUeXBlIG9mIHNjZW5lXHJcbiAgICAweGE0MDc6ICdHYWluQ29udHJvbCcsIC8vIERlZ3JlZSBvZiBvdmVyYWxsIGltYWdlIGdhaW4gYWRqdXN0bWVudFxyXG4gICAgMHhhNDA4OiAnQ29udHJhc3QnLCAvLyBEaXJlY3Rpb24gb2YgY29udHJhc3QgcHJvY2Vzc2luZyBhcHBsaWVkIGJ5IGNhbWVyYVxyXG4gICAgMHhhNDA5OiAnU2F0dXJhdGlvbicsIC8vIERpcmVjdGlvbiBvZiBzYXR1cmF0aW9uIHByb2Nlc3NpbmcgYXBwbGllZCBieSBjYW1lcmFcclxuICAgIDB4YTQwYTogJ1NoYXJwbmVzcycsIC8vIERpcmVjdGlvbiBvZiBzaGFycG5lc3MgcHJvY2Vzc2luZyBhcHBsaWVkIGJ5IGNhbWVyYVxyXG4gICAgMHhhNDBiOiAnRGV2aWNlU2V0dGluZ0Rlc2NyaXB0aW9uJywgLy9cclxuICAgIDB4YTQwYzogJ1N1YmplY3REaXN0YW5jZVJhbmdlJywgLy8gRGlzdGFuY2UgdG8gc3ViamVjdFxyXG5cclxuICAgIC8vIG90aGVyIHRhZ3NcclxuICAgIDB4YTAwNTogJ0ludGVyb3BlcmFiaWxpdHlJRkRQb2ludGVyJyxcclxuICAgIDB4YTQyMDogJ0ltYWdlVW5pcXVlSUQnIC8vIElkZW50aWZpZXIgYXNzaWduZWQgdW5pcXVlbHkgdG8gZWFjaCBpbWFnZVxyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBUaWZmVGFnczogYW55ID0ge1xyXG4gICAgMHgwMTAwOiAnSW1hZ2VXaWR0aCcsXHJcbiAgICAweDAxMDE6ICdJbWFnZUhlaWdodCcsXHJcbiAgICAweDg3Njk6ICdFeGlmSUZEUG9pbnRlcicsXHJcbiAgICAweDg4MjU6ICdHUFNJbmZvSUZEUG9pbnRlcicsXHJcbiAgICAweGEwMDU6ICdJbnRlcm9wZXJhYmlsaXR5SUZEUG9pbnRlcicsXHJcbiAgICAweDAxMDI6ICdCaXRzUGVyU2FtcGxlJyxcclxuICAgIDB4MDEwMzogJ0NvbXByZXNzaW9uJyxcclxuICAgIDB4MDEwNjogJ1Bob3RvbWV0cmljSW50ZXJwcmV0YXRpb24nLFxyXG4gICAgMHgwMTEyOiAnT3JpZW50YXRpb24nLFxyXG4gICAgMHgwMTE1OiAnU2FtcGxlc1BlclBpeGVsJyxcclxuICAgIDB4MDExYzogJ1BsYW5hckNvbmZpZ3VyYXRpb24nLFxyXG4gICAgMHgwMjEyOiAnWUNiQ3JTdWJTYW1wbGluZycsXHJcbiAgICAweDAyMTM6ICdZQ2JDclBvc2l0aW9uaW5nJyxcclxuICAgIDB4MDExYTogJ1hSZXNvbHV0aW9uJyxcclxuICAgIDB4MDExYjogJ1lSZXNvbHV0aW9uJyxcclxuICAgIDB4MDEyODogJ1Jlc29sdXRpb25Vbml0JyxcclxuICAgIDB4MDExMTogJ1N0cmlwT2Zmc2V0cycsXHJcbiAgICAweDAxMTY6ICdSb3dzUGVyU3RyaXAnLFxyXG4gICAgMHgwMTE3OiAnU3RyaXBCeXRlQ291bnRzJyxcclxuICAgIDB4MDIwMTogJ0pQRUdJbnRlcmNoYW5nZUZvcm1hdCcsXHJcbiAgICAweDAyMDI6ICdKUEVHSW50ZXJjaGFuZ2VGb3JtYXRMZW5ndGgnLFxyXG4gICAgMHgwMTJkOiAnVHJhbnNmZXJGdW5jdGlvbicsXHJcbiAgICAweDAxM2U6ICdXaGl0ZVBvaW50JyxcclxuICAgIDB4MDEzZjogJ1ByaW1hcnlDaHJvbWF0aWNpdGllcycsXHJcbiAgICAweDAyMTE6ICdZQ2JDckNvZWZmaWNpZW50cycsXHJcbiAgICAweDAyMTQ6ICdSZWZlcmVuY2VCbGFja1doaXRlJyxcclxuICAgIDB4MDEzMjogJ0RhdGVUaW1lJyxcclxuICAgIDB4MDEwZTogJ0ltYWdlRGVzY3JpcHRpb24nLFxyXG4gICAgMHgwMTBmOiAnTWFrZScsXHJcbiAgICAweDAxMTA6ICdNb2RlbCcsXHJcbiAgICAweDAxMzE6ICdTb2Z0d2FyZScsXHJcbiAgICAweDAxM2I6ICdBcnRpc3QnLFxyXG4gICAgMHg4Mjk4OiAnQ29weXJpZ2h0J1xyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBHUFNUYWdzOiBhbnkgPSB7XHJcbiAgICAweDAwMDA6ICdHUFNWZXJzaW9uSUQnLFxyXG4gICAgMHgwMDAxOiAnR1BTTGF0aXR1ZGVSZWYnLFxyXG4gICAgMHgwMDAyOiAnR1BTTGF0aXR1ZGUnLFxyXG4gICAgMHgwMDAzOiAnR1BTTG9uZ2l0dWRlUmVmJyxcclxuICAgIDB4MDAwNDogJ0dQU0xvbmdpdHVkZScsXHJcbiAgICAweDAwMDU6ICdHUFNBbHRpdHVkZVJlZicsXHJcbiAgICAweDAwMDY6ICdHUFNBbHRpdHVkZScsXHJcbiAgICAweDAwMDc6ICdHUFNUaW1lU3RhbXAnLFxyXG4gICAgMHgwMDA4OiAnR1BTU2F0ZWxsaXRlcycsXHJcbiAgICAweDAwMDk6ICdHUFNTdGF0dXMnLFxyXG4gICAgMHgwMDBhOiAnR1BTTWVhc3VyZU1vZGUnLFxyXG4gICAgMHgwMDBiOiAnR1BTRE9QJyxcclxuICAgIDB4MDAwYzogJ0dQU1NwZWVkUmVmJyxcclxuICAgIDB4MDAwZDogJ0dQU1NwZWVkJyxcclxuICAgIDB4MDAwZTogJ0dQU1RyYWNrUmVmJyxcclxuICAgIDB4MDAwZjogJ0dQU1RyYWNrJyxcclxuICAgIDB4MDAxMDogJ0dQU0ltZ0RpcmVjdGlvblJlZicsXHJcbiAgICAweDAwMTE6ICdHUFNJbWdEaXJlY3Rpb24nLFxyXG4gICAgMHgwMDEyOiAnR1BTTWFwRGF0dW0nLFxyXG4gICAgMHgwMDEzOiAnR1BTRGVzdExhdGl0dWRlUmVmJyxcclxuICAgIDB4MDAxNDogJ0dQU0Rlc3RMYXRpdHVkZScsXHJcbiAgICAweDAwMTU6ICdHUFNEZXN0TG9uZ2l0dWRlUmVmJyxcclxuICAgIDB4MDAxNjogJ0dQU0Rlc3RMb25naXR1ZGUnLFxyXG4gICAgMHgwMDE3OiAnR1BTRGVzdEJlYXJpbmdSZWYnLFxyXG4gICAgMHgwMDE4OiAnR1BTRGVzdEJlYXJpbmcnLFxyXG4gICAgMHgwMDE5OiAnR1BTRGVzdERpc3RhbmNlUmVmJyxcclxuICAgIDB4MDAxYTogJ0dQU0Rlc3REaXN0YW5jZScsXHJcbiAgICAweDAwMWI6ICdHUFNQcm9jZXNzaW5nTWV0aG9kJyxcclxuICAgIDB4MDAxYzogJ0dQU0FyZWFJbmZvcm1hdGlvbicsXHJcbiAgICAweDAwMWQ6ICdHUFNEYXRlU3RhbXAnLFxyXG4gICAgMHgwMDFlOiAnR1BTRGlmZmVyZW50aWFsJ1xyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBTdHJpbmdWYWx1ZXM6IGFueSA9IHtcclxuICAgIEV4cG9zdXJlUHJvZ3JhbToge1xyXG4gICAgICAwOiAnTm90IGRlZmluZWQnLFxyXG4gICAgICAxOiAnTWFudWFsJyxcclxuICAgICAgMjogJ05vcm1hbCBwcm9ncmFtJyxcclxuICAgICAgMzogJ0FwZXJ0dXJlIHByaW9yaXR5JyxcclxuICAgICAgNDogJ1NodXR0ZXIgcHJpb3JpdHknLFxyXG4gICAgICA1OiAnQ3JlYXRpdmUgcHJvZ3JhbScsXHJcbiAgICAgIDY6ICdBY3Rpb24gcHJvZ3JhbScsXHJcbiAgICAgIDc6ICdQb3J0cmFpdCBtb2RlJyxcclxuICAgICAgODogJ0xhbmRzY2FwZSBtb2RlJ1xyXG4gICAgfSxcclxuICAgIE1ldGVyaW5nTW9kZToge1xyXG4gICAgICAwOiAnVW5rbm93bicsXHJcbiAgICAgIDE6ICdBdmVyYWdlJyxcclxuICAgICAgMjogJ0NlbnRlcldlaWdodGVkQXZlcmFnZScsXHJcbiAgICAgIDM6ICdTcG90JyxcclxuICAgICAgNDogJ011bHRpU3BvdCcsXHJcbiAgICAgIDU6ICdQYXR0ZXJuJyxcclxuICAgICAgNjogJ1BhcnRpYWwnLFxyXG4gICAgICAyNTU6ICdPdGhlcidcclxuICAgIH0sXHJcbiAgICBMaWdodFNvdXJjZToge1xyXG4gICAgICAwOiAnVW5rbm93bicsXHJcbiAgICAgIDE6ICdEYXlsaWdodCcsXHJcbiAgICAgIDI6ICdGbHVvcmVzY2VudCcsXHJcbiAgICAgIDM6ICdUdW5nc3RlbiAoaW5jYW5kZXNjZW50IGxpZ2h0KScsXHJcbiAgICAgIDQ6ICdGbGFzaCcsXHJcbiAgICAgIDk6ICdGaW5lIHdlYXRoZXInLFxyXG4gICAgICAxMDogJ0Nsb3VkeSB3ZWF0aGVyJyxcclxuICAgICAgMTE6ICdTaGFkZScsXHJcbiAgICAgIDEyOiAnRGF5bGlnaHQgZmx1b3Jlc2NlbnQgKEQgNTcwMCAtIDcxMDBLKScsXHJcbiAgICAgIDEzOiAnRGF5IHdoaXRlIGZsdW9yZXNjZW50IChOIDQ2MDAgLSA1NDAwSyknLFxyXG4gICAgICAxNDogJ0Nvb2wgd2hpdGUgZmx1b3Jlc2NlbnQgKFcgMzkwMCAtIDQ1MDBLKScsXHJcbiAgICAgIDE1OiAnV2hpdGUgZmx1b3Jlc2NlbnQgKFdXIDMyMDAgLSAzNzAwSyknLFxyXG4gICAgICAxNzogJ1N0YW5kYXJkIGxpZ2h0IEEnLFxyXG4gICAgICAxODogJ1N0YW5kYXJkIGxpZ2h0IEInLFxyXG4gICAgICAxOTogJ1N0YW5kYXJkIGxpZ2h0IEMnLFxyXG4gICAgICAyMDogJ0Q1NScsXHJcbiAgICAgIDIxOiAnRDY1JyxcclxuICAgICAgMjI6ICdENzUnLFxyXG4gICAgICAyMzogJ0Q1MCcsXHJcbiAgICAgIDI0OiAnSVNPIHN0dWRpbyB0dW5nc3RlbicsXHJcbiAgICAgIDI1NTogJ090aGVyJ1xyXG4gICAgfSxcclxuICAgIEZsYXNoOiB7XHJcbiAgICAgIDB4MDAwMDogJ0ZsYXNoIGRpZCBub3QgZmlyZScsXHJcbiAgICAgIDB4MDAwMTogJ0ZsYXNoIGZpcmVkJyxcclxuICAgICAgMHgwMDA1OiAnU3Ryb2JlIHJldHVybiBsaWdodCBub3QgZGV0ZWN0ZWQnLFxyXG4gICAgICAweDAwMDc6ICdTdHJvYmUgcmV0dXJuIGxpZ2h0IGRldGVjdGVkJyxcclxuICAgICAgMHgwMDA5OiAnRmxhc2ggZmlyZWQsIGNvbXB1bHNvcnkgZmxhc2ggbW9kZScsXHJcbiAgICAgIDB4MDAwZDogJ0ZsYXNoIGZpcmVkLCBjb21wdWxzb3J5IGZsYXNoIG1vZGUsIHJldHVybiBsaWdodCBub3QgZGV0ZWN0ZWQnLFxyXG4gICAgICAweDAwMGY6ICdGbGFzaCBmaXJlZCwgY29tcHVsc29yeSBmbGFzaCBtb2RlLCByZXR1cm4gbGlnaHQgZGV0ZWN0ZWQnLFxyXG4gICAgICAweDAwMTA6ICdGbGFzaCBkaWQgbm90IGZpcmUsIGNvbXB1bHNvcnkgZmxhc2ggbW9kZScsXHJcbiAgICAgIDB4MDAxODogJ0ZsYXNoIGRpZCBub3QgZmlyZSwgYXV0byBtb2RlJyxcclxuICAgICAgMHgwMDE5OiAnRmxhc2ggZmlyZWQsIGF1dG8gbW9kZScsXHJcbiAgICAgIDB4MDAxZDogJ0ZsYXNoIGZpcmVkLCBhdXRvIG1vZGUsIHJldHVybiBsaWdodCBub3QgZGV0ZWN0ZWQnLFxyXG4gICAgICAweDAwMWY6ICdGbGFzaCBmaXJlZCwgYXV0byBtb2RlLCByZXR1cm4gbGlnaHQgZGV0ZWN0ZWQnLFxyXG4gICAgICAweDAwMjA6ICdObyBmbGFzaCBmdW5jdGlvbicsXHJcbiAgICAgIDB4MDA0MTogJ0ZsYXNoIGZpcmVkLCByZWQtZXllIHJlZHVjdGlvbiBtb2RlJyxcclxuICAgICAgMHgwMDQ1OiAnRmxhc2ggZmlyZWQsIHJlZC1leWUgcmVkdWN0aW9uIG1vZGUsIHJldHVybiBsaWdodCBub3QgZGV0ZWN0ZWQnLFxyXG4gICAgICAweDAwNDc6ICdGbGFzaCBmaXJlZCwgcmVkLWV5ZSByZWR1Y3Rpb24gbW9kZSwgcmV0dXJuIGxpZ2h0IGRldGVjdGVkJyxcclxuICAgICAgMHgwMDQ5OiAnRmxhc2ggZmlyZWQsIGNvbXB1bHNvcnkgZmxhc2ggbW9kZSwgcmVkLWV5ZSByZWR1Y3Rpb24gbW9kZScsXHJcbiAgICAgIDB4MDA0ZDogJ0ZsYXNoIGZpcmVkLCBjb21wdWxzb3J5IGZsYXNoIG1vZGUsIHJlZC1leWUgcmVkdWN0aW9uIG1vZGUsIHJldHVybiBsaWdodCBub3QgZGV0ZWN0ZWQnLFxyXG4gICAgICAweDAwNGY6ICdGbGFzaCBmaXJlZCwgY29tcHVsc29yeSBmbGFzaCBtb2RlLCByZWQtZXllIHJlZHVjdGlvbiBtb2RlLCByZXR1cm4gbGlnaHQgZGV0ZWN0ZWQnLFxyXG4gICAgICAweDAwNTk6ICdGbGFzaCBmaXJlZCwgYXV0byBtb2RlLCByZWQtZXllIHJlZHVjdGlvbiBtb2RlJyxcclxuICAgICAgMHgwMDVkOiAnRmxhc2ggZmlyZWQsIGF1dG8gbW9kZSwgcmV0dXJuIGxpZ2h0IG5vdCBkZXRlY3RlZCwgcmVkLWV5ZSByZWR1Y3Rpb24gbW9kZScsXHJcbiAgICAgIDB4MDA1ZjogJ0ZsYXNoIGZpcmVkLCBhdXRvIG1vZGUsIHJldHVybiBsaWdodCBkZXRlY3RlZCwgcmVkLWV5ZSByZWR1Y3Rpb24gbW9kZSdcclxuICAgIH0sXHJcbiAgICBTZW5zaW5nTWV0aG9kOiB7XHJcbiAgICAgIDE6ICdOb3QgZGVmaW5lZCcsXHJcbiAgICAgIDI6ICdPbmUtY2hpcCBjb2xvciBhcmVhIHNlbnNvcicsXHJcbiAgICAgIDM6ICdUd28tY2hpcCBjb2xvciBhcmVhIHNlbnNvcicsXHJcbiAgICAgIDQ6ICdUaHJlZS1jaGlwIGNvbG9yIGFyZWEgc2Vuc29yJyxcclxuICAgICAgNTogJ0NvbG9yIHNlcXVlbnRpYWwgYXJlYSBzZW5zb3InLFxyXG4gICAgICA3OiAnVHJpbGluZWFyIHNlbnNvcicsXHJcbiAgICAgIDg6ICdDb2xvciBzZXF1ZW50aWFsIGxpbmVhciBzZW5zb3InXHJcbiAgICB9LFxyXG4gICAgU2NlbmVDYXB0dXJlVHlwZToge1xyXG4gICAgICAwOiAnU3RhbmRhcmQnLFxyXG4gICAgICAxOiAnTGFuZHNjYXBlJyxcclxuICAgICAgMjogJ1BvcnRyYWl0JyxcclxuICAgICAgMzogJ05pZ2h0IHNjZW5lJ1xyXG4gICAgfSxcclxuICAgIFNjZW5lVHlwZToge1xyXG4gICAgICAxOiAnRGlyZWN0bHkgcGhvdG9ncmFwaGVkJ1xyXG4gICAgfSxcclxuICAgIEN1c3RvbVJlbmRlcmVkOiB7XHJcbiAgICAgIDA6ICdOb3JtYWwgcHJvY2VzcycsXHJcbiAgICAgIDE6ICdDdXN0b20gcHJvY2VzcydcclxuICAgIH0sXHJcbiAgICBXaGl0ZUJhbGFuY2U6IHtcclxuICAgICAgMDogJ0F1dG8gd2hpdGUgYmFsYW5jZScsXHJcbiAgICAgIDE6ICdNYW51YWwgd2hpdGUgYmFsYW5jZSdcclxuICAgIH0sXHJcbiAgICBHYWluQ29udHJvbDoge1xyXG4gICAgICAwOiAnTm9uZScsXHJcbiAgICAgIDE6ICdMb3cgZ2FpbiB1cCcsXHJcbiAgICAgIDI6ICdIaWdoIGdhaW4gdXAnLFxyXG4gICAgICAzOiAnTG93IGdhaW4gZG93bicsXHJcbiAgICAgIDQ6ICdIaWdoIGdhaW4gZG93bidcclxuICAgIH0sXHJcbiAgICBDb250cmFzdDoge1xyXG4gICAgICAwOiAnTm9ybWFsJyxcclxuICAgICAgMTogJ1NvZnQnLFxyXG4gICAgICAyOiAnSGFyZCdcclxuICAgIH0sXHJcbiAgICBTYXR1cmF0aW9uOiB7XHJcbiAgICAgIDA6ICdOb3JtYWwnLFxyXG4gICAgICAxOiAnTG93IHNhdHVyYXRpb24nLFxyXG4gICAgICAyOiAnSGlnaCBzYXR1cmF0aW9uJ1xyXG4gICAgfSxcclxuICAgIFNoYXJwbmVzczoge1xyXG4gICAgICAwOiAnTm9ybWFsJyxcclxuICAgICAgMTogJ1NvZnQnLFxyXG4gICAgICAyOiAnSGFyZCdcclxuICAgIH0sXHJcbiAgICBTdWJqZWN0RGlzdGFuY2VSYW5nZToge1xyXG4gICAgICAwOiAnVW5rbm93bicsXHJcbiAgICAgIDE6ICdNYWNybycsXHJcbiAgICAgIDI6ICdDbG9zZSB2aWV3JyxcclxuICAgICAgMzogJ0Rpc3RhbnQgdmlldydcclxuICAgIH0sXHJcbiAgICBGaWxlU291cmNlOiB7XHJcbiAgICAgIDM6ICdEU0MnXHJcbiAgICB9LFxyXG5cclxuICAgIENvbXBvbmVudHM6IHtcclxuICAgICAgMDogJycsXHJcbiAgICAgIDE6ICdZJyxcclxuICAgICAgMjogJ0NiJyxcclxuICAgICAgMzogJ0NyJyxcclxuICAgICAgNDogJ1InLFxyXG4gICAgICA1OiAnRycsXHJcbiAgICAgIDY6ICdCJ1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBhZGRFdmVudChcclxuICAgIGVsZW1lbnQ6IEV2ZW50VGFyZ2V0IHwgYW55LFxyXG4gICAgZXZlbnQ6IHN0cmluZyxcclxuICAgIGhhbmRsZXI6IEV2ZW50TGlzdGVuZXJcclxuICApIHtcclxuICAgIGlmIChlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBmYWxzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBIZWxsbywgSUUhXHJcbiAgICAgIGlmIChlbGVtZW50LmF0dGFjaEV2ZW50KSB7XHJcbiAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaW1hZ2VIYXNEYXRhKGltZzogSUltYWdlRXh0ZW5kZWQpIHtcclxuICAgIHJldHVybiAhIWltZy5leGlmZGF0YTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NDogc3RyaW5nKTogQXJyYXlCdWZmZXIge1xyXG4gICAgYmFzZTY0ID0gYmFzZTY0LnJlcGxhY2UoL15kYXRhOihbXjtdKyk7YmFzZTY0LC9naW0sICcnKTtcclxuICAgIGNvbnN0IGJpbmFyeTogc3RyaW5nID0gYXRvYihiYXNlNjQpO1xyXG4gICAgY29uc3QgbGVuOiBudW1iZXIgPSBiaW5hcnkubGVuZ3RoO1xyXG4gICAgY29uc3QgYnVmZmVyOiBBcnJheUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihsZW4pO1xyXG4gICAgY29uc3QgdmlldzogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIHZpZXdbaV0gPSBiaW5hcnkuY2hhckNvZGVBdChpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBidWZmZXI7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb2JqZWN0VVJMVG9CbG9iKHVybDogc3RyaW5nLCBjYWxsYmFjazogKGJsb2I6IEJsb2IpID0+IHZvaWQpIHtcclxuICAgIGNvbnN0IGh0dHA6IFhNTEh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICBodHRwLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XHJcbiAgICBodHRwLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcclxuICAgIGh0dHAub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICBpZiAoaHR0cC5zdGF0dXMgPT09IDIwMCB8fCBodHRwLnN0YXR1cyA9PT0gMCkge1xyXG4gICAgICAgIGNhbGxiYWNrKGh0dHAucmVzcG9uc2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgaHR0cC5zZW5kKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0SW1hZ2VEYXRhKFxyXG4gICAgaW1nOiBJSW1hZ2VFeHRlbmRlZCB8IEJsb2IgfCBGaWxlLFxyXG4gICAgY2FsbGJhY2s6IChpbWc6IElJbWFnZUV4dGVuZGVkKSA9PiB2b2lkXHJcbiAgKSB7XHJcbiAgICBjb25zdCBoYW5kbGVCaW5hcnlGaWxlID0gKGJpbkZpbGU6IEFycmF5QnVmZmVyKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmZpbmRFWElGaW5KUEVHKGJpbkZpbGUpO1xyXG4gICAgICBjb25zdCBpcHRjZGF0YSA9IHRoaXMuZmluZElQVENpbkpQRUcoYmluRmlsZSk7XHJcbiAgICAgIChpbWcgYXMgSUltYWdlRXh0ZW5kZWQpLmV4aWZkYXRhID0gZGF0YSB8fCB7fTtcclxuICAgICAgKGltZyBhcyBJSW1hZ2VFeHRlbmRlZCkuaXB0Y2RhdGEgPSBpcHRjZGF0YSB8fCB7fTtcclxuICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgY2FsbGJhY2suY2FsbChpbWcpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGlmICgnc3JjJyBpbiBpbWcgJiYgKGltZyBhcyBJSW1hZ2VFeHRlbmRlZCkuc3JjKSB7XHJcbiAgICAgIGlmICgvXmRhdGE6L2kudGVzdCgoaW1nIGFzIElJbWFnZUV4dGVuZGVkKS5zcmMpKSB7XHJcbiAgICAgICAgLy8gRGF0YSBVUklcclxuICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IHRoaXMuYmFzZTY0VG9BcnJheUJ1ZmZlcihcclxuICAgICAgICAgIChpbWcgYXMgSUltYWdlRXh0ZW5kZWQpLnNyY1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgaGFuZGxlQmluYXJ5RmlsZShhcnJheUJ1ZmZlcik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKC9eYmxvYjovaS50ZXN0KChpbWcgYXMgSUltYWdlRXh0ZW5kZWQpLnNyYykpIHtcclxuICAgICAgICAgIC8vIE9iamVjdCBVUkxcclxuICAgICAgICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGhhbmRsZUJpbmFyeUZpbGUoZS50YXJnZXQucmVzdWx0KTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICB0aGlzLm9iamVjdFVSTFRvQmxvYigoaW1nIGFzIElJbWFnZUV4dGVuZGVkKS5zcmMsIChibG9iOiBCbG9iKSA9PiB7XHJcbiAgICAgICAgICAgIGZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgaHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgaHR0cC5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChodHRwLnN0YXR1cyA9PT0gMjAwIHx8IGh0dHAuc3RhdHVzID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgaGFuZGxlQmluYXJ5RmlsZShodHRwLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBsb2FkIGltYWdlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBodHRwLm9wZW4oJ0dFVCcsIChpbWcgYXMgSUltYWdlRXh0ZW5kZWQpLnNyYywgdHJ1ZSk7XHJcbiAgICAgICAgICBodHRwLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XHJcbiAgICAgICAgICBodHRwLnNlbmQobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoRmlsZVJlYWRlciAmJiAoaW1nIGluc3RhbmNlb2YgQmxvYiB8fCBpbWcgaW5zdGFuY2VvZiBGaWxlKSkge1xyXG4gICAgICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5sb2coJ0dvdCBmaWxlIG9mIGxlbmd0aCAnICsgZS50YXJnZXQucmVzdWx0LmJ5dGVMZW5ndGgpO1xyXG4gICAgICAgICAgaGFuZGxlQmluYXJ5RmlsZShlLnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoaW1nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGZpbmRFWElGaW5KUEVHKGZpbGU6IEFycmF5QnVmZmVyKSB7XHJcbiAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhmaWxlKTtcclxuXHJcbiAgICB0aGlzLmxvZygnR290IGZpbGUgb2YgbGVuZ3RoICcgKyBmaWxlLmJ5dGVMZW5ndGgpO1xyXG4gICAgaWYgKGRhdGFWaWV3LmdldFVpbnQ4KDApICE9PSAweGZmIHx8IGRhdGFWaWV3LmdldFVpbnQ4KDEpICE9PSAweGQ4KSB7XHJcbiAgICAgIHRoaXMubG9nKCdOb3QgYSB2YWxpZCBKUEVHJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTsgLy8gbm90IGEgdmFsaWQganBlZ1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBvZmZzZXQgPSAyO1xyXG4gICAgY29uc3QgbGVuZ3RoOiBudW1iZXIgPSBmaWxlLmJ5dGVMZW5ndGg7XHJcbiAgICBsZXQgbWFya2VyOiBudW1iZXI7XHJcblxyXG4gICAgd2hpbGUgKG9mZnNldCA8IGxlbmd0aCkge1xyXG4gICAgICBpZiAoZGF0YVZpZXcuZ2V0VWludDgob2Zmc2V0KSAhPT0gMHhmZikge1xyXG4gICAgICAgIHRoaXMubG9nKFxyXG4gICAgICAgICAgJ05vdCBhIHZhbGlkIG1hcmtlciBhdCBvZmZzZXQgJyArXHJcbiAgICAgICAgICAgIG9mZnNldCArXHJcbiAgICAgICAgICAgICcsIGZvdW5kOiAnICtcclxuICAgICAgICAgICAgZGF0YVZpZXcuZ2V0VWludDgob2Zmc2V0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBub3QgYSB2YWxpZCBtYXJrZXIsIHNvbWV0aGluZyBpcyB3cm9uZ1xyXG4gICAgICB9XHJcblxyXG4gICAgICBtYXJrZXIgPSBkYXRhVmlldy5nZXRVaW50OChvZmZzZXQgKyAxKTtcclxuICAgICAgdGhpcy5sb2cobWFya2VyKTtcclxuXHJcbiAgICAgIC8vIHdlIGNvdWxkIGltcGxlbWVudCBoYW5kbGluZyBmb3Igb3RoZXIgbWFya2VycyBoZXJlLFxyXG4gICAgICAvLyBidXQgd2UncmUgb25seSBsb29raW5nIGZvciAweEZGRTEgZm9yIEVYSUYgZGF0YVxyXG4gICAgICBpZiAobWFya2VyID09PSAyMjUpIHtcclxuICAgICAgICB0aGlzLmxvZygnRm91bmQgMHhGRkUxIG1hcmtlcicpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRFWElGRGF0YShkYXRhVmlldywgb2Zmc2V0ICsgNCk7IC8vICwgZGF0YVZpZXcuZ2V0VWludDE2KG9mZnNldCArIDIpIC0gMik7XHJcbiAgICAgICAgLy8gb2Zmc2V0ICs9IDIgKyBmaWxlLmdldFNob3J0QXQob2Zmc2V0KzIsIHRydWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9mZnNldCArPSAyICsgZGF0YVZpZXcuZ2V0VWludDE2KG9mZnNldCArIDIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZmluZElQVENpbkpQRUcoZmlsZTogQXJyYXlCdWZmZXIpIHtcclxuICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGZpbGUpO1xyXG5cclxuICAgIHRoaXMubG9nKCdHb3QgZmlsZSBvZiBsZW5ndGggJyArIGZpbGUuYnl0ZUxlbmd0aCk7XHJcbiAgICBpZiAoZGF0YVZpZXcuZ2V0VWludDgoMCkgIT09IDB4ZmYgfHwgZGF0YVZpZXcuZ2V0VWludDgoMSkgIT09IDB4ZDgpIHtcclxuICAgICAgdGhpcy5sb2coJ05vdCBhIHZhbGlkIEpQRUcnKTtcclxuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBub3QgYSB2YWxpZCBqcGVnXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG9mZnNldCA9IDI7XHJcbiAgICBjb25zdCBsZW5ndGggPSBmaWxlLmJ5dGVMZW5ndGg7XHJcblxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcclxuICAgIGNvbnN0IGlzRmllbGRTZWdtZW50U3RhcnQgPSAoX2RhdGFWaWV3OiBEYXRhVmlldywgX29mZnNldDogbnVtYmVyKSA9PiB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgX2RhdGFWaWV3LmdldFVpbnQ4KF9vZmZzZXQpID09PSAweDM4ICYmXHJcbiAgICAgICAgX2RhdGFWaWV3LmdldFVpbnQ4KF9vZmZzZXQgKyAxKSA9PT0gMHg0MiAmJlxyXG4gICAgICAgIF9kYXRhVmlldy5nZXRVaW50OChfb2Zmc2V0ICsgMikgPT09IDB4NDkgJiZcclxuICAgICAgICBfZGF0YVZpZXcuZ2V0VWludDgoX29mZnNldCArIDMpID09PSAweDRkICYmXHJcbiAgICAgICAgX2RhdGFWaWV3LmdldFVpbnQ4KF9vZmZzZXQgKyA0KSA9PT0gMHgwNCAmJlxyXG4gICAgICAgIF9kYXRhVmlldy5nZXRVaW50OChfb2Zmc2V0ICsgNSkgPT09IDB4MDRcclxuICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgd2hpbGUgKG9mZnNldCA8IGxlbmd0aCkge1xyXG4gICAgICBpZiAoaXNGaWVsZFNlZ21lbnRTdGFydChkYXRhVmlldywgb2Zmc2V0KSkge1xyXG4gICAgICAgIC8vIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSBuYW1lIGhlYWRlciAod2hpY2ggaXMgcGFkZGVkIHRvIGFuIGV2ZW4gbnVtYmVyIG9mIGJ5dGVzKVxyXG4gICAgICAgIGxldCBuYW1lSGVhZGVyTGVuZ3RoID0gZGF0YVZpZXcuZ2V0VWludDgob2Zmc2V0ICsgNyk7XHJcbiAgICAgICAgaWYgKG5hbWVIZWFkZXJMZW5ndGggJSAyICE9PSAwKSB7XHJcbiAgICAgICAgICBuYW1lSGVhZGVyTGVuZ3RoICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENoZWNrIGZvciBwcmUgcGhvdG9zaG9wIDYgZm9ybWF0XHJcbiAgICAgICAgaWYgKG5hbWVIZWFkZXJMZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIC8vIEFsd2F5cyA0XHJcbiAgICAgICAgICBuYW1lSGVhZGVyTGVuZ3RoID0gNDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHN0YXJ0T2Zmc2V0ID0gb2Zmc2V0ICsgOCArIG5hbWVIZWFkZXJMZW5ndGg7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkxlbmd0aCA9IGRhdGFWaWV3LmdldFVpbnQxNihvZmZzZXQgKyA2ICsgbmFtZUhlYWRlckxlbmd0aCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRJUFRDRGF0YShmaWxlLCBzdGFydE9mZnNldCwgc2VjdGlvbkxlbmd0aCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIE5vdCB0aGUgbWFya2VyLCBjb250aW51ZSBzZWFyY2hpbmdcclxuICAgICAgb2Zmc2V0Kys7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVhZElQVENEYXRhKFxyXG4gICAgZmlsZTogQXJyYXlCdWZmZXIsXHJcbiAgICBzdGFydE9mZnNldDogbnVtYmVyLFxyXG4gICAgc2VjdGlvbkxlbmd0aDogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhmaWxlKTtcclxuICAgIGNvbnN0IGRhdGE6IGFueSA9IHt9O1xyXG4gICAgbGV0IGZpZWxkVmFsdWU6IGFueTtcclxuICAgIGxldCBmaWVsZE5hbWU6IHN0cmluZztcclxuICAgIGxldCBkYXRhU2l6ZTogbnVtYmVyO1xyXG4gICAgbGV0IHNlZ21lbnRUeXBlOiBhbnk7XHJcbiAgICBsZXQgc2VnbWVudFNpemU6IG51bWJlcjtcclxuICAgIGxldCBzZWdtZW50U3RhcnRQb3MgPSBzdGFydE9mZnNldDtcclxuICAgIHdoaWxlIChzZWdtZW50U3RhcnRQb3MgPCBzdGFydE9mZnNldCArIHNlY3Rpb25MZW5ndGgpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGRhdGFWaWV3LmdldFVpbnQ4KHNlZ21lbnRTdGFydFBvcykgPT09IDB4MWMgJiZcclxuICAgICAgICBkYXRhVmlldy5nZXRVaW50OChzZWdtZW50U3RhcnRQb3MgKyAxKSA9PT0gMHgwMlxyXG4gICAgICApIHtcclxuICAgICAgICBzZWdtZW50VHlwZSA9IGRhdGFWaWV3LmdldFVpbnQ4KHNlZ21lbnRTdGFydFBvcyArIDIpO1xyXG4gICAgICAgIGlmIChzZWdtZW50VHlwZSBpbiB0aGlzLklwdGNGaWVsZE1hcCkge1xyXG4gICAgICAgICAgZGF0YVNpemUgPSBkYXRhVmlldy5nZXRJbnQxNihzZWdtZW50U3RhcnRQb3MgKyAzKTtcclxuICAgICAgICAgIHNlZ21lbnRTaXplID0gZGF0YVNpemUgKyA1O1xyXG4gICAgICAgICAgZmllbGROYW1lID0gdGhpcy5JcHRjRmllbGRNYXBbc2VnbWVudFR5cGVdO1xyXG4gICAgICAgICAgZmllbGRWYWx1ZSA9IHRoaXMuZ2V0U3RyaW5nRnJvbURCKFxyXG4gICAgICAgICAgICBkYXRhVmlldyxcclxuICAgICAgICAgICAgc2VnbWVudFN0YXJ0UG9zICsgNSxcclxuICAgICAgICAgICAgZGF0YVNpemVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBhbHJlYWR5IHN0b3JlZCBhIHZhbHVlIHdpdGggdGhpcyBuYW1lXHJcbiAgICAgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShmaWVsZE5hbWUpKSB7XHJcbiAgICAgICAgICAgIC8vIFZhbHVlIGFscmVhZHkgc3RvcmVkIHdpdGggdGhpcyBuYW1lLCBjcmVhdGUgbXVsdGl2YWx1ZSBmaWVsZFxyXG4gICAgICAgICAgICBpZiAoZGF0YVtmaWVsZE5hbWVdIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICBkYXRhW2ZpZWxkTmFtZV0ucHVzaChmaWVsZFZhbHVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBkYXRhW2ZpZWxkTmFtZV0gPSBbZGF0YVtmaWVsZE5hbWVdLCBmaWVsZFZhbHVlXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YVtmaWVsZE5hbWVdID0gZmllbGRWYWx1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgc2VnbWVudFN0YXJ0UG9zKys7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZWFkVGFncyhcclxuICAgIGZpbGU6IERhdGFWaWV3LFxyXG4gICAgdGlmZlN0YXJ0OiBudW1iZXIsXHJcbiAgICBkaXJTdGFydDogbnVtYmVyLFxyXG4gICAgc3RyaW5nczogc3RyaW5nW10sXHJcbiAgICBiaWdFbmQ6IGJvb2xlYW5cclxuICApOiBhbnkge1xyXG4gICAgY29uc3QgZW50cmllczogbnVtYmVyID0gZmlsZS5nZXRVaW50MTYoZGlyU3RhcnQsICFiaWdFbmQpO1xyXG4gICAgY29uc3QgdGFnczogYW55ID0ge307XHJcbiAgICBsZXQgZW50cnlPZmZzZXQ6IG51bWJlcjtcclxuICAgIGxldCB0YWc6IHN0cmluZztcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVudHJpZXM7IGkrKykge1xyXG4gICAgICBlbnRyeU9mZnNldCA9IGRpclN0YXJ0ICsgaSAqIDEyICsgMjtcclxuICAgICAgdGFnID0gc3RyaW5nc1tmaWxlLmdldFVpbnQxNihlbnRyeU9mZnNldCwgIWJpZ0VuZCldO1xyXG4gICAgICBpZiAoIXRhZykge1xyXG4gICAgICAgIHRoaXMubG9nKCdVbmtub3duIHRhZzogJyArIGZpbGUuZ2V0VWludDE2KGVudHJ5T2Zmc2V0LCAhYmlnRW5kKSk7XHJcbiAgICAgIH1cclxuICAgICAgdGFnc1t0YWddID0gdGhpcy5yZWFkVGFnVmFsdWUoXHJcbiAgICAgICAgZmlsZSxcclxuICAgICAgICBlbnRyeU9mZnNldCxcclxuICAgICAgICB0aWZmU3RhcnQsXHJcbiAgICAgICAgZGlyU3RhcnQsXHJcbiAgICAgICAgYmlnRW5kXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFncztcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZWFkVGFnVmFsdWUoXHJcbiAgICBmaWxlOiBhbnksXHJcbiAgICBlbnRyeU9mZnNldDogbnVtYmVyLFxyXG4gICAgdGlmZlN0YXJ0OiBudW1iZXIsXHJcbiAgICBkaXJTdGFydDogbnVtYmVyLFxyXG4gICAgYmlnRW5kOiBib29sZWFuXHJcbiAgKTogYW55IHtcclxuICAgIGNvbnN0IHR5cGU6IG51bWJlciA9IGZpbGUuZ2V0VWludDE2KGVudHJ5T2Zmc2V0ICsgMiwgIWJpZ0VuZCk7XHJcbiAgICBjb25zdCBudW1WYWx1ZXMgPSBmaWxlLmdldFVpbnQzMihlbnRyeU9mZnNldCArIDQsICFiaWdFbmQpO1xyXG4gICAgY29uc3QgdmFsdWVPZmZzZXQgPSBmaWxlLmdldFVpbnQzMihlbnRyeU9mZnNldCArIDgsICFiaWdFbmQpICsgdGlmZlN0YXJ0O1xyXG4gICAgbGV0IG9mZnNldDogbnVtYmVyO1xyXG4gICAgbGV0IHZhbHM6IGFueVtdO1xyXG4gICAgbGV0IHZhbDogYW55O1xyXG4gICAgbGV0IG46IG51bWJlcjtcclxuICAgIGxldCBudW1lcmF0b3I6IGFueTtcclxuICAgIGxldCBkZW5vbWluYXRvcjogYW55O1xyXG5cclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlIDE6IC8vIGJ5dGUsIDgtYml0IHVuc2lnbmVkIGludFxyXG4gICAgICBjYXNlIDc6IC8vIHVuZGVmaW5lZCwgOC1iaXQgYnl0ZSwgdmFsdWUgZGVwZW5kaW5nIG9uIGZpZWxkXHJcbiAgICAgICAgaWYgKG51bVZhbHVlcyA9PT0gMSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZpbGUuZ2V0VWludDgoZW50cnlPZmZzZXQgKyA4LCAhYmlnRW5kKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgb2Zmc2V0ID0gbnVtVmFsdWVzID4gNCA/IHZhbHVlT2Zmc2V0IDogZW50cnlPZmZzZXQgKyA4O1xyXG4gICAgICAgICAgdmFscyA9IFtdO1xyXG4gICAgICAgICAgZm9yIChuID0gMDsgbiA8IG51bVZhbHVlczsgbisrKSB7XHJcbiAgICAgICAgICAgIHZhbHNbbl0gPSBmaWxlLmdldFVpbnQ4KG9mZnNldCArIG4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHZhbHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAyOiAvLyBhc2NpaSwgOC1iaXQgYnl0ZVxyXG4gICAgICAgIG9mZnNldCA9IG51bVZhbHVlcyA+IDQgPyB2YWx1ZU9mZnNldCA6IGVudHJ5T2Zmc2V0ICsgODtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTdHJpbmdGcm9tREIoZmlsZSwgb2Zmc2V0LCBudW1WYWx1ZXMgLSAxKTtcclxuXHJcbiAgICAgIGNhc2UgMzogLy8gc2hvcnQsIDE2IGJpdCBpbnRcclxuICAgICAgICBpZiAobnVtVmFsdWVzID09PSAxKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmlsZS5nZXRVaW50MTYoZW50cnlPZmZzZXQgKyA4LCAhYmlnRW5kKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgb2Zmc2V0ID0gbnVtVmFsdWVzID4gMiA/IHZhbHVlT2Zmc2V0IDogZW50cnlPZmZzZXQgKyA4O1xyXG4gICAgICAgICAgdmFscyA9IFtdO1xyXG4gICAgICAgICAgZm9yIChuID0gMDsgbiA8IG51bVZhbHVlczsgbisrKSB7XHJcbiAgICAgICAgICAgIHZhbHNbbl0gPSBmaWxlLmdldFVpbnQxNihvZmZzZXQgKyAyICogbiwgIWJpZ0VuZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdmFscztcclxuICAgICAgICB9XHJcblxyXG4gICAgICBjYXNlIDQ6IC8vIGxvbmcsIDMyIGJpdCBpbnRcclxuICAgICAgICBpZiAobnVtVmFsdWVzID09PSAxKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmlsZS5nZXRVaW50MzIoZW50cnlPZmZzZXQgKyA4LCAhYmlnRW5kKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFscyA9IFtdO1xyXG4gICAgICAgICAgZm9yIChuID0gMDsgbiA8IG51bVZhbHVlczsgbisrKSB7XHJcbiAgICAgICAgICAgIHZhbHNbbl0gPSBmaWxlLmdldFVpbnQzMih2YWx1ZU9mZnNldCArIDQgKiBuLCAhYmlnRW5kKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB2YWxzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgNTogLy8gcmF0aW9uYWwgPSB0d28gbG9uZyB2YWx1ZXMsIGZpcnN0IGlzIG51bWVyYXRvciwgc2Vjb25kIGlzIGRlbm9taW5hdG9yXHJcbiAgICAgICAgaWYgKG51bVZhbHVlcyA9PT0gMSkge1xyXG4gICAgICAgICAgbnVtZXJhdG9yID0gZmlsZS5nZXRVaW50MzIodmFsdWVPZmZzZXQsICFiaWdFbmQpO1xyXG4gICAgICAgICAgZGVub21pbmF0b3IgPSBmaWxlLmdldFVpbnQzMih2YWx1ZU9mZnNldCArIDQsICFiaWdFbmQpO1xyXG4gICAgICAgICAgdmFsID0gbmV3IEZyYWN0aW9uKG51bWVyYXRvciAvIGRlbm9taW5hdG9yKTtcclxuICAgICAgICAgIHZhbC5udW1lcmF0b3IgPSBudW1lcmF0b3I7XHJcbiAgICAgICAgICB2YWwuZGVub21pbmF0b3IgPSBkZW5vbWluYXRvcjtcclxuICAgICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhbHMgPSBbXTtcclxuICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBudW1WYWx1ZXM7IG4rKykge1xyXG4gICAgICAgICAgICBudW1lcmF0b3IgPSBmaWxlLmdldFVpbnQzMih2YWx1ZU9mZnNldCArIDggKiBuLCAhYmlnRW5kKTtcclxuICAgICAgICAgICAgZGVub21pbmF0b3IgPSBmaWxlLmdldFVpbnQzMih2YWx1ZU9mZnNldCArIDQgKyA4ICogbiwgIWJpZ0VuZCk7XHJcbiAgICAgICAgICAgIHZhbHNbbl0gPSBuZXcgRnJhY3Rpb24obnVtZXJhdG9yIC8gZGVub21pbmF0b3IpO1xyXG4gICAgICAgICAgICB2YWxzW25dLm51bWVyYXRvciA9IG51bWVyYXRvcjtcclxuICAgICAgICAgICAgdmFsc1tuXS5kZW5vbWluYXRvciA9IGRlbm9taW5hdG9yO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHZhbHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgY2FzZSA5OiAvLyBzbG9uZywgMzIgYml0IHNpZ25lZCBpbnRcclxuICAgICAgICBpZiAobnVtVmFsdWVzID09PSAxKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmlsZS5nZXRJbnQzMihlbnRyeU9mZnNldCArIDgsICFiaWdFbmQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YWxzID0gW107XHJcbiAgICAgICAgICBmb3IgKG4gPSAwOyBuIDwgbnVtVmFsdWVzOyBuKyspIHtcclxuICAgICAgICAgICAgdmFsc1tuXSA9IGZpbGUuZ2V0SW50MzIodmFsdWVPZmZzZXQgKyA0ICogbiwgIWJpZ0VuZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdmFscztcclxuICAgICAgICB9XHJcblxyXG4gICAgICBjYXNlIDEwOiAvLyBzaWduZWQgcmF0aW9uYWwsIHR3byBzbG9uZ3MsIGZpcnN0IGlzIG51bWVyYXRvciwgc2Vjb25kIGlzIGRlbm9taW5hdG9yXHJcbiAgICAgICAgaWYgKG51bVZhbHVlcyA9PT0gMSkge1xyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgZmlsZS5nZXRJbnQzMih2YWx1ZU9mZnNldCwgIWJpZ0VuZCkgL1xyXG4gICAgICAgICAgICBmaWxlLmdldEludDMyKHZhbHVlT2Zmc2V0ICsgNCwgIWJpZ0VuZClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhbHMgPSBbXTtcclxuICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBudW1WYWx1ZXM7IG4rKykge1xyXG4gICAgICAgICAgICB2YWxzW25dID1cclxuICAgICAgICAgICAgICBmaWxlLmdldEludDMyKHZhbHVlT2Zmc2V0ICsgOCAqIG4sICFiaWdFbmQpIC9cclxuICAgICAgICAgICAgICBmaWxlLmdldEludDMyKHZhbHVlT2Zmc2V0ICsgNCArIDggKiBuLCAhYmlnRW5kKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB2YWxzO1xyXG4gICAgICAgIH1cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRTdHJpbmdGcm9tREIoXHJcbiAgICBidWZmZXI6IERhdGFWaWV3LFxyXG4gICAgc3RhcnQ6IG51bWJlcixcclxuICAgIGxlbmd0aDogbnVtYmVyXHJcbiAgKTogc3RyaW5nIHtcclxuICAgIGxldCBvdXRzdHIgPSAnJztcclxuICAgIGZvciAobGV0IG4gPSBzdGFydDsgbiA8IHN0YXJ0ICsgbGVuZ3RoOyBuKyspIHtcclxuICAgICAgb3V0c3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmZmVyLmdldFVpbnQ4KG4pKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvdXRzdHI7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVhZEVYSUZEYXRhKGZpbGU6IERhdGFWaWV3LCBzdGFydDogbnVtYmVyKTogYW55IHtcclxuICAgIGlmICh0aGlzLmdldFN0cmluZ0Zyb21EQihmaWxlLCBzdGFydCwgNCkgIT09ICdFeGlmJykge1xyXG4gICAgICB0aGlzLmxvZygnTm90IHZhbGlkIEVYSUYgZGF0YSEgJyArIHRoaXMuZ2V0U3RyaW5nRnJvbURCKGZpbGUsIHN0YXJ0LCA0KSk7XHJcblxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGJpZ0VuZDogYm9vbGVhbjtcclxuICAgIGxldCB0YWdzOiBhbnk7XHJcbiAgICBsZXQgdGFnOiBzdHJpbmc7XHJcbiAgICBsZXQgZXhpZkRhdGE6IGFueTtcclxuICAgIGxldCBncHNEYXRhOiBhbnk7XHJcbiAgICBjb25zdCB0aWZmT2Zmc2V0OiBudW1iZXIgPSBzdGFydCArIDY7XHJcblxyXG4gICAgLy8gdGVzdCBmb3IgVElGRiB2YWxpZGl0eSBhbmQgZW5kaWFubmVzc1xyXG4gICAgaWYgKGZpbGUuZ2V0VWludDE2KHRpZmZPZmZzZXQpID09PSAweDQ5NDkpIHtcclxuICAgICAgYmlnRW5kID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoZmlsZS5nZXRVaW50MTYodGlmZk9mZnNldCkgPT09IDB4NGQ0ZCkge1xyXG4gICAgICAgIGJpZ0VuZCA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5sb2coJ05vdCB2YWxpZCBUSUZGIGRhdGEhIChubyAweDQ5NDkgb3IgMHg0RDREKScpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChmaWxlLmdldFVpbnQxNih0aWZmT2Zmc2V0ICsgMiwgIWJpZ0VuZCkgIT09IDB4MDAyYSkge1xyXG4gICAgICB0aGlzLmxvZygnTm90IHZhbGlkIFRJRkYgZGF0YSEgKG5vIDB4MDAyQSknKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpcnN0SUZET2Zmc2V0ID0gZmlsZS5nZXRVaW50MzIodGlmZk9mZnNldCArIDQsICFiaWdFbmQpO1xyXG5cclxuICAgIGlmIChmaXJzdElGRE9mZnNldCA8IDB4MDAwMDAwMDgpIHtcclxuICAgICAgdGhpcy5sb2coXHJcbiAgICAgICAgJ05vdCB2YWxpZCBUSUZGIGRhdGEhIChGaXJzdCBvZmZzZXQgbGVzcyB0aGFuIDgpJyxcclxuICAgICAgICBmaWxlLmdldFVpbnQzMih0aWZmT2Zmc2V0ICsgNCwgIWJpZ0VuZClcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHRhZ3MgPSB0aGlzLnJlYWRUYWdzKFxyXG4gICAgICBmaWxlLFxyXG4gICAgICB0aWZmT2Zmc2V0LFxyXG4gICAgICB0aWZmT2Zmc2V0ICsgZmlyc3RJRkRPZmZzZXQsXHJcbiAgICAgIHRoaXMuVGlmZlRhZ3MsXHJcbiAgICAgIGJpZ0VuZFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodGFncy5FeGlmSUZEUG9pbnRlcikge1xyXG4gICAgICBleGlmRGF0YSA9IHRoaXMucmVhZFRhZ3MoXHJcbiAgICAgICAgZmlsZSxcclxuICAgICAgICB0aWZmT2Zmc2V0LFxyXG4gICAgICAgIHRpZmZPZmZzZXQgKyB0YWdzLkV4aWZJRkRQb2ludGVyLFxyXG4gICAgICAgIHRoaXMuVGFncyxcclxuICAgICAgICBiaWdFbmRcclxuICAgICAgKTtcclxuICAgICAgZm9yICh0YWcgaW4gZXhpZkRhdGEpIHtcclxuICAgICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChleGlmRGF0YSwgdGFnKSkge1xyXG4gICAgICAgICAgc3dpdGNoICh0YWcpIHtcclxuICAgICAgICAgICAgY2FzZSAnTGlnaHRTb3VyY2UnOlxyXG4gICAgICAgICAgICBjYXNlICdGbGFzaCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ01ldGVyaW5nTW9kZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ0V4cG9zdXJlUHJvZ3JhbSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ1NlbnNpbmdNZXRob2QnOlxyXG4gICAgICAgICAgICBjYXNlICdTY2VuZUNhcHR1cmVUeXBlJzpcclxuICAgICAgICAgICAgY2FzZSAnU2NlbmVUeXBlJzpcclxuICAgICAgICAgICAgY2FzZSAnQ3VzdG9tUmVuZGVyZWQnOlxyXG4gICAgICAgICAgICBjYXNlICdXaGl0ZUJhbGFuY2UnOlxyXG4gICAgICAgICAgICBjYXNlICdHYWluQ29udHJvbCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ0NvbnRyYXN0JzpcclxuICAgICAgICAgICAgY2FzZSAnU2F0dXJhdGlvbic6XHJcbiAgICAgICAgICAgIGNhc2UgJ1NoYXJwbmVzcyc6XHJcbiAgICAgICAgICAgIGNhc2UgJ1N1YmplY3REaXN0YW5jZVJhbmdlJzpcclxuICAgICAgICAgICAgY2FzZSAnRmlsZVNvdXJjZSc6XHJcbiAgICAgICAgICAgICAgZXhpZkRhdGFbdGFnXSA9IHRoaXMuU3RyaW5nVmFsdWVzW3RhZ11bZXhpZkRhdGFbdGFnXV07XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0V4aWZWZXJzaW9uJzpcclxuICAgICAgICAgICAgY2FzZSAnRmxhc2hwaXhWZXJzaW9uJzpcclxuICAgICAgICAgICAgICBleGlmRGF0YVt0YWddID0gU3RyaW5nLmZyb21DaGFyQ29kZShcclxuICAgICAgICAgICAgICAgIGV4aWZEYXRhW3RhZ11bMF0sXHJcbiAgICAgICAgICAgICAgICBleGlmRGF0YVt0YWddWzFdLFxyXG4gICAgICAgICAgICAgICAgZXhpZkRhdGFbdGFnXVsyXSxcclxuICAgICAgICAgICAgICAgIGV4aWZEYXRhW3RhZ11bM11cclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdDb21wb25lbnRzQ29uZmlndXJhdGlvbic6XHJcbiAgICAgICAgICAgICAgY29uc3QgY29tcG9wZW50cyA9ICdDb21wb25lbnRzJztcclxuICAgICAgICAgICAgICBleGlmRGF0YVt0YWddID1cclxuICAgICAgICAgICAgICAgIHRoaXMuU3RyaW5nVmFsdWVzW2NvbXBvcGVudHNdW2V4aWZEYXRhW3RhZ11bMF1dICtcclxuICAgICAgICAgICAgICAgIHRoaXMuU3RyaW5nVmFsdWVzW2NvbXBvcGVudHNdW2V4aWZEYXRhW3RhZ11bMV1dICtcclxuICAgICAgICAgICAgICAgIHRoaXMuU3RyaW5nVmFsdWVzW2NvbXBvcGVudHNdW2V4aWZEYXRhW3RhZ11bMl1dICtcclxuICAgICAgICAgICAgICAgIHRoaXMuU3RyaW5nVmFsdWVzW2NvbXBvcGVudHNdW2V4aWZEYXRhW3RhZ11bM11dO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGFnc1t0YWddID0gZXhpZkRhdGFbdGFnXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGFncy5HUFNJbmZvSUZEUG9pbnRlcikge1xyXG4gICAgICBncHNEYXRhID0gdGhpcy5yZWFkVGFncyhcclxuICAgICAgICBmaWxlLFxyXG4gICAgICAgIHRpZmZPZmZzZXQsXHJcbiAgICAgICAgdGlmZk9mZnNldCArIHRhZ3MuR1BTSW5mb0lGRFBvaW50ZXIsXHJcbiAgICAgICAgdGhpcy5HUFNUYWdzLFxyXG4gICAgICAgIGJpZ0VuZFxyXG4gICAgICApO1xyXG4gICAgICBmb3IgKHRhZyBpbiBncHNEYXRhKSB7XHJcbiAgICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwoZ3BzRGF0YSwgdGFnKSkge1xyXG4gICAgICAgICAgc3dpdGNoICh0YWcpIHtcclxuICAgICAgICAgICAgY2FzZSAnR1BTVmVyc2lvbklEJzpcclxuICAgICAgICAgICAgICBncHNEYXRhW3RhZ10gPVxyXG4gICAgICAgICAgICAgICAgZ3BzRGF0YVt0YWddWzBdICtcclxuICAgICAgICAgICAgICAgICcuJyArXHJcbiAgICAgICAgICAgICAgICBncHNEYXRhW3RhZ11bMV0gK1xyXG4gICAgICAgICAgICAgICAgJy4nICtcclxuICAgICAgICAgICAgICAgIGdwc0RhdGFbdGFnXVsyXSArXHJcbiAgICAgICAgICAgICAgICAnLicgK1xyXG4gICAgICAgICAgICAgICAgZ3BzRGF0YVt0YWddWzNdO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGFnc1t0YWddID0gZ3BzRGF0YVt0YWddO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0YWdzO1xyXG4gIH1cclxuXHJcbiAgLy8gICBnZXQgcmlkIG9mIHRoaXMgc2lsbHkgaXNzdWVcclxuICBwcml2YXRlIGNoZWNrSW1hZ2VUeXBlKGltZzogYW55KSB7XHJcbiAgICByZXR1cm4gaW1nIGluc3RhbmNlb2YgSW1hZ2UgfHwgaW1nIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXREYXRhKGltZzogSUltYWdlRXh0ZW5kZWQgfCBIVE1MSW1hZ2VFbGVtZW50LCBjYWxsYmFjazogKCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKHRoaXMuY2hlY2tJbWFnZVR5cGUoaW1nKSAmJiAhaW1nLmNvbXBsZXRlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuaW1hZ2VIYXNEYXRhKGltZyBhcyBJSW1hZ2VFeHRlbmRlZCkpIHtcclxuICAgICAgdGhpcy5nZXRJbWFnZURhdGEoaW1nIGFzIElJbWFnZUV4dGVuZGVkLCBjYWxsYmFjayk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICBjYWxsYmFjay5jYWxsKGltZyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFRhZyhpbWc6IGFueSwgdGFnOiBzdHJpbmcpIHtcclxuICAgIGlmICghdGhpcy5pbWFnZUhhc0RhdGEoaW1nKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW1nLmV4aWZkYXRhW3RhZ107XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0QWxsVGFncyhpbWc6IGFueSkge1xyXG4gICAgaWYgKCF0aGlzLmltYWdlSGFzRGF0YShpbWcpKSB7XHJcbiAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICAgIGxldCBhOiBzdHJpbmc7XHJcbiAgICBjb25zdCBkYXRhOiBhbnkgPSBpbWcuZXhpZmRhdGE7XHJcbiAgICBjb25zdCB0YWdzOiBhbnkgPSB7fTtcclxuICAgIGZvciAoYSBpbiBkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGEpKSB7XHJcbiAgICAgICAgdGFnc1thXSA9IGRhdGFbYV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0YWdzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHByZXR0eShpbWc6IElJbWFnZUV4dGVuZGVkKSB7XHJcbiAgICBpZiAoIXRoaXMuaW1hZ2VIYXNEYXRhKGltZykpIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgbGV0IGE6IGFueTtcclxuICAgIGNvbnN0IGRhdGE6IGFueSA9IGltZy5leGlmZGF0YTtcclxuICAgIGxldCBzdHJQcmV0dHkgPSAnJztcclxuICAgIGZvciAoYSBpbiBkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGEpKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2FdID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgaWYgKGRhdGFbYV0gaW5zdGFuY2VvZiBOdW1iZXIpIHtcclxuICAgICAgICAgICAgc3RyUHJldHR5ICs9IGAke2F9IDogJHtkYXRhW2FdfSBbJHtkYXRhW2FdLm51bWVyYXRvcn0vJHtcclxuICAgICAgICAgICAgICBkYXRhW2FdLmRlbm9taW5hdG9yXHJcbiAgICAgICAgICAgIH1dXFxyXFxuYDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0clByZXR0eSArPSBgJHthfSA6IFske2RhdGFbYV0ubGVuZ3RofSB2YWx1ZXNdXFxyXFxuYDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc3RyUHJldHR5ICs9IGAke2F9IDogJHtkYXRhW2FdfVxcclxcbmA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RyUHJldHR5O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlYWRGcm9tQmluYXJ5RmlsZShmaWxlOiBBcnJheUJ1ZmZlcikge1xyXG4gICAgcmV0dXJuIHRoaXMuZmluZEVYSUZpbkpQRUcoZmlsZSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbG9nKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICBpZiAodGhpcy5kZWJ1Zykge1xyXG4gICAgICBjb25zb2xlLmxvZyhhcmdzKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19